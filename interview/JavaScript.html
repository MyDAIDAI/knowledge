<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript面试题 | 邓攀的技术博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.19179342.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.5153ca81.js" as="script"><link rel="preload" href="/knowledge/assets/js/2.09711cee.js" as="script"><link rel="preload" href="/knowledge/assets/js/1.ecac6abe.js" as="script"><link rel="preload" href="/knowledge/assets/js/71.12f2ab04.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.61451e43.js"><link rel="prefetch" href="/knowledge/assets/js/100.fb313dd8.js"><link rel="prefetch" href="/knowledge/assets/js/101.f6084221.js"><link rel="prefetch" href="/knowledge/assets/js/11.0d8da72b.js"><link rel="prefetch" href="/knowledge/assets/js/12.7874f28d.js"><link rel="prefetch" href="/knowledge/assets/js/13.7e77d130.js"><link rel="prefetch" href="/knowledge/assets/js/14.73222ce7.js"><link rel="prefetch" href="/knowledge/assets/js/15.0b07f9b9.js"><link rel="prefetch" href="/knowledge/assets/js/16.2cc5269e.js"><link rel="prefetch" href="/knowledge/assets/js/17.4dc16511.js"><link rel="prefetch" href="/knowledge/assets/js/18.0f42d2d9.js"><link rel="prefetch" href="/knowledge/assets/js/19.d5eb91b2.js"><link rel="prefetch" href="/knowledge/assets/js/20.748f25e2.js"><link rel="prefetch" href="/knowledge/assets/js/21.518a3952.js"><link rel="prefetch" href="/knowledge/assets/js/22.215fc719.js"><link rel="prefetch" href="/knowledge/assets/js/23.85574af4.js"><link rel="prefetch" href="/knowledge/assets/js/24.179f0801.js"><link rel="prefetch" href="/knowledge/assets/js/25.e813b79e.js"><link rel="prefetch" href="/knowledge/assets/js/26.ea3c2f8a.js"><link rel="prefetch" href="/knowledge/assets/js/27.d9a0e0aa.js"><link rel="prefetch" href="/knowledge/assets/js/28.499e6f9d.js"><link rel="prefetch" href="/knowledge/assets/js/29.7ecc7047.js"><link rel="prefetch" href="/knowledge/assets/js/3.6c565688.js"><link rel="prefetch" href="/knowledge/assets/js/30.938ba476.js"><link rel="prefetch" href="/knowledge/assets/js/31.0a6ecdcd.js"><link rel="prefetch" href="/knowledge/assets/js/32.8aef7027.js"><link rel="prefetch" href="/knowledge/assets/js/33.6f6a3468.js"><link rel="prefetch" href="/knowledge/assets/js/34.d901a786.js"><link rel="prefetch" href="/knowledge/assets/js/35.1fd0524e.js"><link rel="prefetch" href="/knowledge/assets/js/36.77bc3059.js"><link rel="prefetch" href="/knowledge/assets/js/37.679cc1e5.js"><link rel="prefetch" href="/knowledge/assets/js/38.f75e290e.js"><link rel="prefetch" href="/knowledge/assets/js/39.1d0ee5d8.js"><link rel="prefetch" href="/knowledge/assets/js/4.587ffb67.js"><link rel="prefetch" href="/knowledge/assets/js/40.3cb3a24b.js"><link rel="prefetch" href="/knowledge/assets/js/41.027942e8.js"><link rel="prefetch" href="/knowledge/assets/js/42.8eb2c3d5.js"><link rel="prefetch" href="/knowledge/assets/js/43.090ab8dc.js"><link rel="prefetch" href="/knowledge/assets/js/44.3bd0b34a.js"><link rel="prefetch" href="/knowledge/assets/js/45.f8142d41.js"><link rel="prefetch" href="/knowledge/assets/js/46.82abb8fa.js"><link rel="prefetch" href="/knowledge/assets/js/47.0f319d1e.js"><link rel="prefetch" href="/knowledge/assets/js/48.c6480f5c.js"><link rel="prefetch" href="/knowledge/assets/js/49.f4067732.js"><link rel="prefetch" href="/knowledge/assets/js/5.15716dac.js"><link rel="prefetch" href="/knowledge/assets/js/50.757a56db.js"><link rel="prefetch" href="/knowledge/assets/js/51.7ebfa544.js"><link rel="prefetch" href="/knowledge/assets/js/52.9611130c.js"><link rel="prefetch" href="/knowledge/assets/js/53.9a8b6f46.js"><link rel="prefetch" href="/knowledge/assets/js/54.a5ab0902.js"><link rel="prefetch" href="/knowledge/assets/js/55.cba7ef0d.js"><link rel="prefetch" href="/knowledge/assets/js/56.af6cd21e.js"><link rel="prefetch" href="/knowledge/assets/js/57.59fb1a6a.js"><link rel="prefetch" href="/knowledge/assets/js/58.d606fdf7.js"><link rel="prefetch" href="/knowledge/assets/js/59.6761b349.js"><link rel="prefetch" href="/knowledge/assets/js/6.6a6617af.js"><link rel="prefetch" href="/knowledge/assets/js/60.a7f4c4ff.js"><link rel="prefetch" href="/knowledge/assets/js/61.e9190c42.js"><link rel="prefetch" href="/knowledge/assets/js/62.a9401860.js"><link rel="prefetch" href="/knowledge/assets/js/63.b827600a.js"><link rel="prefetch" href="/knowledge/assets/js/64.e38255e6.js"><link rel="prefetch" href="/knowledge/assets/js/65.02b1dd62.js"><link rel="prefetch" href="/knowledge/assets/js/66.8f2338cb.js"><link rel="prefetch" href="/knowledge/assets/js/67.c01adc05.js"><link rel="prefetch" href="/knowledge/assets/js/68.e358bf7d.js"><link rel="prefetch" href="/knowledge/assets/js/69.39b37e2d.js"><link rel="prefetch" href="/knowledge/assets/js/7.ba76af71.js"><link rel="prefetch" href="/knowledge/assets/js/70.dcc63002.js"><link rel="prefetch" href="/knowledge/assets/js/72.2bfd6ad1.js"><link rel="prefetch" href="/knowledge/assets/js/73.1bc5932a.js"><link rel="prefetch" href="/knowledge/assets/js/74.d9482a02.js"><link rel="prefetch" href="/knowledge/assets/js/75.67d0111b.js"><link rel="prefetch" href="/knowledge/assets/js/76.150ac4a4.js"><link rel="prefetch" href="/knowledge/assets/js/77.4deee2b6.js"><link rel="prefetch" href="/knowledge/assets/js/78.5921430f.js"><link rel="prefetch" href="/knowledge/assets/js/79.f74ff1d0.js"><link rel="prefetch" href="/knowledge/assets/js/80.5c34c25e.js"><link rel="prefetch" href="/knowledge/assets/js/81.6e54321c.js"><link rel="prefetch" href="/knowledge/assets/js/82.e8bbc1c5.js"><link rel="prefetch" href="/knowledge/assets/js/83.49d5e292.js"><link rel="prefetch" href="/knowledge/assets/js/84.98c35d72.js"><link rel="prefetch" href="/knowledge/assets/js/85.f73eb0e7.js"><link rel="prefetch" href="/knowledge/assets/js/86.3d3735cc.js"><link rel="prefetch" href="/knowledge/assets/js/87.5d806d0d.js"><link rel="prefetch" href="/knowledge/assets/js/88.57c59503.js"><link rel="prefetch" href="/knowledge/assets/js/89.aa1e2fe4.js"><link rel="prefetch" href="/knowledge/assets/js/90.2c50ee69.js"><link rel="prefetch" href="/knowledge/assets/js/91.ae6cb9aa.js"><link rel="prefetch" href="/knowledge/assets/js/92.ff541495.js"><link rel="prefetch" href="/knowledge/assets/js/93.8f52d80b.js"><link rel="prefetch" href="/knowledge/assets/js/94.e6d1e6c5.js"><link rel="prefetch" href="/knowledge/assets/js/95.c55344fe.js"><link rel="prefetch" href="/knowledge/assets/js/96.6a87e9ca.js"><link rel="prefetch" href="/knowledge/assets/js/97.43e0ca7f.js"><link rel="prefetch" href="/knowledge/assets/js/98.3fcabc73.js"><link rel="prefetch" href="/knowledge/assets/js/99.f68c9886.js"><link rel="prefetch" href="/knowledge/assets/js/vendors~docsearch.7a484b82.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.19179342.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">邓攀的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge/" aria-current="page" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><a href="/knowledge/vue" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/vue/响应式.html" class="sidebar-link">响应式</a></li><li><a href="/knowledge/vue/编译.html" class="sidebar-link">编译</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/react" class="sidebar-heading clickable"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/react/01.JSX.html" class="sidebar-link">JSX</a></li><li><a href="/knowledge/react/02.Fiber.html" class="sidebar-link">Fiber</a></li><li><a href="/knowledge/react/03.bit.html" class="sidebar-link">Bit</a></li><li><a href="/knowledge/react/BuildYourOwnReact/buildYourOwnReact.html" class="sidebar-link">BuildYourOwnReact</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Source Code Analysis</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/typescript" class="sidebar-heading clickable"><span>TypeScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/typescript/type-challenges.html" class="sidebar-link">类型体操</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/nextjs" class="sidebar-heading clickable"><span>nextjs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/nextjs/docs/05.Fetching Data.html" class="sidebar-link">Fetching Data</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/nodejs" class="sidebar-heading clickable"><span>Node.js</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/nodejs/异步式io.html" class="sidebar-link">异步式IO</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/algorithm" class="sidebar-heading clickable"><span>算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/algorithm/二分查找.html" class="sidebar-link">二分查找</a></li><li><a href="/knowledge/algorithm/大数相加.html" class="sidebar-link">大数相加</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/system-design" class="sidebar-heading clickable"><span>系统设计</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/system-design/news-feed.html" class="sidebar-link">news feed</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/interview" class="sidebar-heading clickable router-link-active open"><span>面试相关</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/interview/html.html" class="sidebar-link">HTML</a></li><li><a href="/knowledge/interview/JavaScript.html" aria-current="page" class="active sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#this指向问题" class="sidebar-link">this指向问题</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#the-difference-between-undefined-and-null" class="sidebar-link">the difference between undefined and null?</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#closure闭包" class="sidebar-link">Closure闭包</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#object和array怎么进行元素遍历" class="sidebar-link">object和array怎么进行元素遍历？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#array的哪些方法可以中断-哪些不能中断-要强制中断怎么做" class="sidebar-link">Array的哪些方法可以中断，哪些不能中断，要强制中断怎么做？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#the-difference-on-the-usage-of-foo-between-funciton-foo-and-var-foo-function" class="sidebar-link">the difference on the usage of foo between funciton foo() {} and var foo = function () {}?</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#explian-function-prototype-bind函数" class="sidebar-link">Explian Function.prototype.bind函数</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#请求竞态问题怎么处理" class="sidebar-link">请求竞态问题怎么处理</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/JavaScript.html#请求缓存-版本控制" class="sidebar-link">请求缓存 + 版本控制</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/GFE" class="sidebar-heading clickable"><span>GFE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/GFE/01.debounce/" class="sidebar-link">Debounce</a></li><li><a href="/knowledge/GFE/02.myReduce/" class="sidebar-link">MyReduce</a></li><li><a href="/knowledge/GFE/03.classnames/" class="sidebar-link">ClassNames</a></li><li><a href="/knowledge/GFE/04.flatten/" class="sidebar-link">Flatten</a></li><li><a href="/knowledge/GFE/05.throttle/" class="sidebar-link">Throttle</a></li><li><a href="/knowledge/GFE/06.Type%20Utilities/" class="sidebar-link">Type Utilities</a></li><li><a href="/knowledge/GFE/07.Type%20Utilities%20II/" class="sidebar-link">Type Utilities II</a></li><li><a href="/knowledge/GFE/08.Promise.all/" class="sidebar-link">Promise.all</a></li><li><a href="/knowledge/GFE/09.Data%20Merging/" class="sidebar-link">Data Merging</a></li><li><a href="/knowledge/GFE/10.Deep%20Clone/" class="sidebar-link">Deep Clone</a></li><li><a href="/knowledge/GFE/11.Event%20Emitter/" class="sidebar-link">Event Emitter</a></li><li><a href="/knowledge/GFE/12.getElementsByStyle/" class="sidebar-link">getElementsByStyle</a></li><li><a href="/knowledge/GFE/13.Function.prototype.call/" class="sidebar-link">Function.prototype.call</a></li><li><a href="/knowledge/GFE/14.List%20Format/" class="sidebar-link">List Format</a></li><li><a href="/knowledge/GFE/15.Map%20Async%20Limit/" class="sidebar-link">Map Async Limit</a></li><li><a href="/knowledge/GFE/16.Deep%20Equal/" class="sidebar-link">Deep Equal</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/Blind" class="sidebar-heading clickable"><span>Blind</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/Blind/01.Balanced%20Brackets/" class="sidebar-link">Balanced Brackets</a></li><li><a href="/knowledge/Blind/02.Find%20Duplicates%20in%20Array/" class="sidebar-link">Find Duplicates in Array</a></li><li><a href="/knowledge/Blind/03.Find%20Missing%20Number%20in%20Sequence/" class="sidebar-link">Find Missing Number in Sequence</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/git" class="sidebar-heading clickable"><span>Git</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/git/commit.html" class="sidebar-link">commit</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript面试题"><a href="#javascript面试题" class="header-anchor">#</a> <code>JavaScript</code>面试题</h1> <h2 id="this指向问题"><a href="#this指向问题" class="header-anchor">#</a> <code>this</code>指向问题</h2> <h3 id="prototypal-inheritance-in-javascript"><a href="#prototypal-inheritance-in-javascript" class="header-anchor">#</a> Prototypal Inheritance in JavaScript</h3> <p><strong>Prototypal inheritance</strong> is a mechanism in JavaScript where objects inherit properties and methods from other objects via a <strong>prototype chain</strong>. Unlike classical inheritance (used in languages like Java), JavaScript uses a <strong>prototype-based model</strong> for object-oriented programming. Here's how it works:</p> <hr> <h3 id="_1-prototype-chain-basics"><a href="#_1-prototype-chain-basics" class="header-anchor">#</a> <strong>1. Prototype Chain Basics</strong></h3> <ul><li>Every JavaScript object has a hidden <code>[[Prototype]]</code> property that points to another object (its <strong>prototype</strong>).</li> <li>When accessing a property/method (e.g., <code>obj.property</code>), JavaScript:
<ol><li>Checks if the property exists on the object itself.</li> <li>If not found, looks up the prototype chain via <code>[[Prototype]]</code>.</li> <li>Continues until it finds the property or reaches <code>null</code> (end of the chain).</li></ol></li></ul> <hr> <h3 id="_2-constructors-and-prototypes"><a href="#_2-constructors-and-prototypes" class="header-anchor">#</a> <strong>2. Constructors and Prototypes</strong></h3> <ul><li><p><strong>Constructor Functions</strong>: Functions used to create objects (e.g., <code>new Array()</code>).</p> <ul><li>They have a <code>prototype</code> property, which becomes the <code>[[Prototype]]</code> of instances they create.</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;Fluffy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Fluffy eats.&quot; (method inherited from prototype)</span>
</code></pre></div></li></ul> <hr> <h3 id="_3-inheritance-between-constructors"><a href="#_3-inheritance-between-constructors" class="header-anchor">#</a> <strong>3. Inheritance Between Constructors</strong></h3> <p>To create a subclass (e.g., <code>Dog</code> inheriting from <code>Animal</code>):</p> <ol><li><p><strong>Link Prototypes</strong>: Set the child constructor's prototype to an instance of the parent.</p></li> <li><p><strong>Fix Constructor Reference</strong>: Ensure the child prototype's <code>constructor</code> points to itself.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Inherit instance properties</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Link prototypes</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span class="token punctuation">;</span> <span class="token comment">// Fix constructor reference</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> barks!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;Buddy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Golden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Buddy eats.&quot; (inherited from Animal)</span>
dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Buddy barks!&quot; (own method)</span>
</code></pre></div></li></ol> <hr> <h3 id="_4-es6-classes-syntactic-sugar"><a href="#_4-es6-classes-syntactic-sugar" class="header-anchor">#</a> <strong>4. ES6 Classes (Syntactic Sugar)</strong></h3> <p>ES6 <code>class</code> simplifies prototypal inheritance:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Calls Animal's constructor</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> barks!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;Buddy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Golden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Buddy eats.&quot;</span>
dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Buddy barks!&quot;</span>
</code></pre></div><hr> <h3 id="_5-object-creation-and-prototypes"><a href="#_5-object-creation-and-prototypes" class="header-anchor">#</a> <strong>5. Object Creation and Prototypes</strong></h3> <ul><li><p><strong>Object Literals</strong>: Inherit from <code>Object.prototype</code>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Object]&quot; (inherited from Object.prototype)</span>
</code></pre></div></li> <li><p><strong>Object.create()</strong>: Create objects with a specific prototype.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Hello!&quot; (inherited from proto)</span>
</code></pre></div></li></ul> <hr> <h3 id="_6-key-methods-and-properties"><a href="#_6-key-methods-and-properties" class="header-anchor">#</a> <strong>6. Key Methods and Properties</strong></h3> <ul><li><p><strong><code>Object.getPrototypeOf(obj)</code></strong>: Returns the prototype of <code>obj</code>.</p></li> <li><p><strong><code>obj.hasOwnProperty(&quot;prop&quot;)</code></strong>: Checks if <code>prop</code> is defined on <code>obj</code> itself (not the prototype).</p></li> <li><p><strong><code>in</code> Operator</strong>: Checks if <code>prop</code> exists anywhere in the prototype chain.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span> <span class="token keyword">in</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true (inherited)</span>
</code></pre></div></li></ul> <hr> <h3 id="_7-considerations"><a href="#_7-considerations" class="header-anchor">#</a> <strong>7. Considerations</strong></h3> <ul><li><strong>Performance</strong>: Long prototype chains can slow down property lookups.</li> <li><strong>Mutability</strong>: Changing a prototype affects all instances (use caution).</li> <li><strong>Composition over Inheritance</strong>: Favor object composition (e.g., mixins) for complex hierarchies.</li></ul> <hr> <h3 id="summary"><a href="#summary" class="header-anchor">#</a> <strong>Summary</strong></h3> <ul><li><strong>Prototypal inheritance</strong> uses a chain of objects (<code>[[Prototype]]</code>) to share properties/methods.</li> <li><strong>Constructors</strong> and <code>class</code> syntax streamline inheritance.</li> <li>Use <code>Object.create()</code>, <code>Object.getPrototypeOf</code>, and <code>hasOwnProperty</code> to manage prototypes.</li></ul> <h2 id="the-difference-between-undefined-and-null"><a href="#the-difference-between-undefined-and-null" class="header-anchor">#</a> the difference between undefined and null?</h2> <p>在 JavaScript 中，<code>null</code>、<code>undefined</code> 和 <strong>未声明变量（undeclared）</strong> 分别表示不同的概念，以下是它们的区别和示例：</p> <hr> <h3 id="_1-undefined-未定义"><a href="#_1-undefined-未定义" class="header-anchor">#</a> <strong>1. <code>undefined</code>（未定义）</strong></h3> <ul><li><p><strong>定义</strong>：变量已声明，但未被赋值。</p></li> <li><p><strong>常见场景</strong>：</p> <ul><li>变量声明后未初始化。</li> <li>函数未明确返回值。</li> <li>访问对象不存在的属性。</li></ul></li> <li><p><strong>示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a<span class="token punctuation">;</span> <span class="token comment">// 声明但未赋值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div></li></ul> <hr> <h3 id="_2-null-空值"><a href="#_2-null-空值" class="header-anchor">#</a> <strong>2. <code>null</code>（空值）</strong></h3> <ul><li><p><strong>定义</strong>：<strong>显式赋值</strong>表示“无”或“空对象引用”。</p></li> <li><p><strong>常见场景</strong>：</p> <ul><li>开发者主动将变量标记为空。</li> <li>显式清空对象引用。</li></ul></li> <li><p><strong>示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 显式赋值为 null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

<span class="token comment">// 清空对象引用</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 释放内存</span>
</code></pre></div></li></ul> <hr> <h3 id="_3-未声明变量-undeclared"><a href="#_3-未声明变量-undeclared" class="header-anchor">#</a> <strong>3. 未声明变量（Undeclared）</strong></h3> <ul><li><p><strong>定义</strong>：变量<strong>未被声明</strong>（未用 <code>var</code>、<code>let</code>、<code>const</code> 定义）。</p></li> <li><p><strong>行为</strong>：</p> <ul><li>在非严格模式下，赋值会隐式创建全局变量（不推荐）。</li> <li>直接访问未声明变量会抛出 <code>ReferenceError</code>。</li></ul></li> <li><p><strong>示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 非严格模式下</span>
c <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 隐式全局变量（不推荐！）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

<span class="token comment">// 严格模式（'use strict'）下会报错</span>
<span class="token punctuation">(</span><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError: d is not defined</span>
</code></pre></div></li></ul> <hr> <h3 id="对比表格"><a href="#对比表格" class="header-anchor">#</a> <strong>对比表格</strong></h3> <table><thead><tr><th>特性</th> <th><code>undefined</code></th> <th><code>null</code></th> <th>未声明变量（Undeclared）</th></tr></thead> <tbody><tr><td><strong>变量是否声明</strong></td> <td>已声明</td> <td>已声明</td> <td><strong>未声明</strong></td></tr> <tr><td><strong>值类型</strong></td> <td><code>typeof</code> 返回 <code>&quot;undefined&quot;</code></td> <td><code>typeof</code> 返回 <code>&quot;object&quot;</code></td> <td>访问会抛出 <code>ReferenceError</code></td></tr> <tr><td><strong>赋值行为</strong></td> <td>默认值</td> <td>显式赋值</td> <td>隐式创建全局变量（非严格模式）</td></tr> <tr><td><strong>用途</strong></td> <td>表示“未初始化”</td> <td>表示“空”或“无对象引用”</td> <td>代码错误或未规范使用</td></tr></tbody></table> <hr> <h3 id="如何检测"><a href="#如何检测" class="header-anchor">#</a> <strong>如何检测？</strong></h3> <ol><li><p><strong>检查 <code>undefined</code></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>variable <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>检查 <code>null</code></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>variable <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>检查变量是否未声明</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> variable <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 变量未声明或值为 undefined</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <hr> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong><code>undefined</code></strong>：变量存在但未赋值（系统默认值）。</li> <li><strong><code>null</code></strong>：开发者主动赋值的空值（语义化标记）。</li> <li><strong>未声明变量</strong>：变量未声明，属于代码错误或不良实践。</li> <li><strong>安全实践</strong>：始终用 <code>let</code>/<code>const</code> 声明变量，避免未声明变量；用 <code>null</code> 显式清空，用 <code>undefined</code> 表示默认未初始化状态。</li></ul> <h2 id="closure闭包"><a href="#closure闭包" class="header-anchor">#</a> <code>Closure</code>闭包</h2> <p><strong>闭包（Closure）</strong> 是 JavaScript 中的一个核心概念，指<strong>函数能够访问并记住其词法作用域（Lexical Scope）</strong>，即使该函数在其词法作用域之外执行。闭包允许函数“记住”并继续访问其定义时的上下文，从而实现数据封装、状态保持等功能。</p> <hr> <h3 id="闭包的核心机制"><a href="#闭包的核心机制" class="header-anchor">#</a> <strong>闭包的核心机制</strong></h3> <ol><li><p><strong>词法作用域（Lexical Scope）</strong><br>
函数在定义时确定作用域链，而非运行时。内部函数（Inner Function）可以访问外部函数（Outer Function）的变量。</p></li> <li><p><strong>持久化引用</strong><br>
即使外部函数已执行完毕，只要内部函数仍被引用（如被返回、作为回调等），外部函数的作用域不会被销毁，形成闭包。</p></li></ol> <hr> <h3 id="示例-闭包的基本结构"><a href="#示例-闭包的基本结构" class="header-anchor">#</a> <strong>示例：闭包的基本结构</strong></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 外部函数的变量</span>
  <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 内部函数访问外部变量</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> inner<span class="token punctuation">;</span> <span class="token comment">// 返回内部函数，形成闭包</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><ul><li><code>inner</code> 函数在 <code>outer</code> 执行后仍能访问 <code>count</code>，因为闭包保留了 <code>count</code> 的引用。</li></ul> <hr> <h3 id="闭包的核心用途"><a href="#闭包的核心用途" class="header-anchor">#</a> <strong>闭包的核心用途</strong></h3> <h4 id="_1-数据封装与私有变量"><a href="#_1-数据封装与私有变量" class="header-anchor">#</a> 1. <strong>数据封装与私有变量</strong></h4> <p>通过闭包模拟私有属性，避免全局污染：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> privateName <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 私有变量，外部无法直接访问</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> privateName<span class="token punctuation">,</span>
    <span class="token function-variable function">setName</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      privateName <span class="token operator">=</span> newName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Alice&quot;</span>
user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Bob&quot;</span>
</code></pre></div><h4 id="_2-状态保持-state-preservation"><a href="#_2-状态保持-state-preservation" class="header-anchor">#</a> 2. <strong>状态保持（State Preservation）</strong></h4> <p>在异步操作（如事件处理、定时器）中保留上下文：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">delayMessage</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 闭包捕获 message</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">delayMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Hello after 2s&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-模块化开发-module-pattern"><a href="#_3-模块化开发-module-pattern" class="header-anchor">#</a> 3. <strong>模块化开发（Module Pattern）</strong></h4> <p>隔离作用域，暴露公共接口：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> calculator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 私有状态</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      result <span class="token operator">+=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getResult</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> result<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>calculator<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre></div><h4 id="_4-函数工厂-function-factory"><a href="#_4-函数工厂-function-factory" class="header-anchor">#</a> 4. <strong>函数工厂（Function Factory）</strong></h4> <p>动态生成功能相似的函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">multiplier</span><span class="token punctuation">(</span><span class="token parameter">factor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> factor<span class="token punctuation">;</span> <span class="token comment">// 闭包捕获 factor</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> double <span class="token operator">=</span> <span class="token function">multiplier</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre></div><hr> <h3 id="闭包的注意事项"><a href="#闭包的注意事项" class="header-anchor">#</a> <strong>闭包的注意事项</strong></h3> <ol><li><p><strong>内存泄漏</strong><br>
闭包可能导致外部函数的作用域无法释放，需在不再需要时解除引用：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> heavyObject <span class="token operator">=</span> largeData<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 heavyObject...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用完毕后解除引用</span>
heavyObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong><code>this</code> 指向问题</strong><br>
闭包中的 <code>this</code> 默认指向全局对象（非严格模式）或 <code>undefined</code>（严格模式），需通过闭包保存 <code>this</code> 或使用箭头函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getValue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 保存 this</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <hr> <h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>闭包</strong>是函数与其词法作用域的结合，允许跨作用域访问数据。</li> <li><strong>适用场景</strong>：封装私有变量、模块化开发、异步状态保持。</li> <li><strong>注意点</strong>：内存管理、<code>this</code> 绑定、避免过度使用导致性能问题。</li></ul> <p>通过合理使用闭包，可以编写出更安全、模块化且高效的 JavaScript 代码。</p> <h2 id="object和array怎么进行元素遍历"><a href="#object和array怎么进行元素遍历" class="header-anchor">#</a> <code>object</code>和<code>array</code>怎么进行元素遍历？</h2> <p>在 JavaScript 中，遍历对象属性和数组项有多种方法，以下是常用的语法和场景：</p> <hr> <h3 id="数组遍历"><a href="#数组遍历" class="header-anchor">#</a> <strong>数组遍历</strong></h3> <h4 id="_1-for-循环"><a href="#_1-for-循环" class="header-anchor">#</a> 1. <strong><code>for</code> 循环</strong></h4> <ul><li><p>最基础的遍历方式，通过索引访问元素。</p></li> <li><p><strong>适用场景</strong>：需要精确控制索引（如中断循环、跳过元素）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10, 20, 30</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="_2-for-of-循环"><a href="#_2-for-of-循环" class="header-anchor">#</a> 2. <strong><code>for...of</code> 循环</strong></h4> <ul><li><p>ES6 语法，直接遍历数组元素。</p></li> <li><p><strong>适用场景</strong>：无需索引的简单遍历。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> num <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10, 20, 30</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="_3-array-prototype-foreach"><a href="#_3-array-prototype-foreach" class="header-anchor">#</a> 3. <strong><code>Array.prototype.forEach</code></strong></h4> <ul><li><p>高阶函数，为每个元素执行回调。</p></li> <li><p><strong>注意</strong>：无法使用 <code>break</code> 或 <code>return</code> 中断循环。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 10, 1 20, 2 30</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_4-map-filter-reduce-等高阶函数"><a href="#_4-map-filter-reduce-等高阶函数" class="header-anchor">#</a> 4. <strong><code>map</code> / <code>filter</code> / <code>reduce</code> 等高阶函数</strong></h4> <ul><li><p>用于转换、筛选或聚合数组。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> doubled <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [20, 40, 60]</span>
<span class="token keyword">const</span> evens <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 30]</span>
</code></pre></div></li></ul> <hr> <h3 id="对象遍历"><a href="#对象遍历" class="header-anchor">#</a> <strong>对象遍历</strong></h3> <h4 id="_1-for-in-循环"><a href="#_1-for-in-循环" class="header-anchor">#</a> 1. <strong><code>for...in</code> 循环</strong></h4> <ul><li><p>遍历对象的<strong>可枚举属性</strong>（包括原型链）。</p></li> <li><p><strong>注意</strong>：需用 <code>hasOwnProperty</code> 过滤非自有属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a 1, b 2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="_2-object-keys-object-values-object-entries"><a href="#_2-object-keys-object-values-object-entries" class="header-anchor">#</a> 2. <strong><code>Object.keys()</code> / <code>Object.values()</code> / <code>Object.entries()</code></strong></h4> <ul><li><p>将对象属性转为数组后遍历。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a 1, b 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a 1, b 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_3-reflect-ownkeys"><a href="#_3-reflect-ownkeys" class="header-anchor">#</a> 3. <strong><code>Reflect.ownKeys()</code></strong></h4> <ul><li><p>获取对象所有自有属性（包括 Symbol 类型）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'c', Symbol(id)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="对比与最佳实践"><a href="#对比与最佳实践" class="header-anchor">#</a> <strong>对比与最佳实践</strong></h3> <table><thead><tr><th><strong>方法</strong></th> <th><strong>适用类型</strong></th> <th><strong>特点</strong></th></tr></thead> <tbody><tr><td><code>for</code></td> <td>数组</td> <td>灵活控制索引，可中断循环。</td></tr> <tr><td><code>for...of</code></td> <td>数组</td> <td>简洁，直接遍历元素。</td></tr> <tr><td><code>forEach</code></td> <td>数组</td> <td>函数式风格，无法中断。</td></tr> <tr><td><code>for...in</code></td> <td>对象</td> <td>遍历键名，需过滤原型属性。</td></tr> <tr><td><code>Object.entries()</code></td> <td>对象</td> <td>同时获取键值对，兼容性好。</td></tr></tbody></table> <hr> <h3 id="何时选择哪种方法"><a href="#何时选择哪种方法" class="header-anchor">#</a> <strong>何时选择哪种方法？</strong></h3> <ul><li><strong>数组遍历优先</strong>：<code>for...of</code> 或 <code>forEach</code>（简洁性优先）或 <code>for</code>（控制索引或性能敏感场景）。</li> <li><strong>对象遍历优先</strong>：<code>Object.entries()</code> + <code>for...of</code>（现代语法）或 <code>for...in</code> + <code>hasOwnProperty</code>（兼容性）。</li></ul> <p>通过合理选择遍历方法，可以提升代码可读性和维护性。</p> <h2 id="array的哪些方法可以中断-哪些不能中断-要强制中断怎么做"><a href="#array的哪些方法可以中断-哪些不能中断-要强制中断怎么做" class="header-anchor">#</a> <code>Array</code>的哪些方法可以中断，哪些不能中断，要强制中断怎么做？</h2> <p>以下是 JavaScript 数组遍历方法的中断能力总结及强行中断方法：</p> <hr> <h3 id="可中断的遍历方法"><a href="#可中断的遍历方法" class="header-anchor">#</a> <strong>可中断的遍历方法</strong></h3> <table><thead><tr><th>方法</th> <th>中断方式</th> <th>示例</th></tr></thead> <tbody><tr><td><strong><code>for</code> 循环</strong></td> <td><code>break</code> 语句</td> <td><code>for (let i=0; i&lt;arr.length; i++) { if (arr[i] === 3) break; }</code></td></tr> <tr><td><strong><code>for...of</code> 循环</strong></td> <td><code>break</code> 语句</td> <td><code>for (const num of arr) { if (num === 3) break; }</code></td></tr> <tr><td><strong><code>Array.some()</code></strong></td> <td>回调返回 <code>true</code></td> <td><code>arr.some(num =&gt; { if (num === 3) return true; });</code></td></tr> <tr><td><strong><code>Array.every()</code></strong></td> <td>回调返回 <code>false</code></td> <td><code>arr.every(num =&gt; { if (num === 3) return false; return true; });</code></td></tr> <tr><td><strong><code>Array.find()</code></strong></td> <td>找到元素后自动停止</td> <td><code>arr.find(num =&gt; num === 3);</code></td></tr> <tr><td><strong><code>Array.findIndex()</code></strong></td> <td>找到索引后自动停止</td> <td><code>arr.findIndex(num =&gt; num === 3);</code></td></tr></tbody></table> <hr> <h3 id="不可中断的遍历方法"><a href="#不可中断的遍历方法" class="header-anchor">#</a> <strong>不可中断的遍历方法</strong></h3> <table><thead><tr><th>方法</th> <th>原因</th></tr></thead> <tbody><tr><td><strong><code>Array.forEach()</code></strong></td> <td>设计为完整遍历，无内置中断机制。</td></tr> <tr><td><strong><code>Array.map()</code></strong></td> <td>需转换所有元素生成新数组。</td></tr> <tr><td><strong><code>Array.filter()</code></strong></td> <td>需检查所有元素是否符合条件。</td></tr> <tr><td><strong><code>Array.reduce()</code></strong></td> <td>需遍历所有元素完成累积计算。</td></tr></tbody></table> <hr> <h3 id="强行中断不可中断的方法"><a href="#强行中断不可中断的方法" class="header-anchor">#</a> <strong>强行中断不可中断的方法</strong></h3> <p>虽然不推荐，但可通过 <strong>抛出异常</strong> 强行终止：</p> <h4 id="示例-强行中断-foreach"><a href="#示例-强行中断-foreach" class="header-anchor">#</a> <strong>示例：强行中断 <code>forEach</code></strong></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;BreakLoop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>message <span class="token operator">!==</span> <span class="token string">&quot;BreakLoop&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> e<span class="token punctuation">;</span> <span class="token comment">// 忽略中断异常</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="示例-强行中断-map"><a href="#示例-强行中断-map" class="header-anchor">#</a> <strong>示例：强行中断 <code>map</code></strong></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;BreakLoop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 4]</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="推荐做法"><a href="#推荐做法" class="header-anchor">#</a> <strong>推荐做法</strong></h3> <ul><li><p><strong>优先使用可中断方法</strong>（如 <code>for</code>、<code>some</code>、<code>every</code>）。</p></li> <li><p><strong>避免异常中断</strong>，因其破坏代码可读性且影响性能。</p></li> <li><p><strong>重构逻辑</strong>：用 <code>filter</code> + <code>map</code> 替代强制中断的需求：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> arr
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 过滤出 [1, 2]</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转换为 [2, 4]</span>
</code></pre></div></li></ul> <hr> <h3 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>可中断方法</strong>：<code>for</code>、<code>for...of</code>、<code>some</code>、<code>every</code>、<code>find</code>、<code>findIndex</code>。</li> <li><strong>不可中断方法</strong>：<code>forEach</code>、<code>map</code>、<code>filter</code>、<code>reduce</code>。</li> <li><strong>强行中断</strong>：通过异常抛出，但应谨慎使用。</li></ul> <h2 id="the-difference-on-the-usage-of-foo-between-funciton-foo-and-var-foo-function"><a href="#the-difference-on-the-usage-of-foo-between-funciton-foo-and-var-foo-function" class="header-anchor">#</a> the difference on the usage of foo between funciton foo() {} and var foo = function () {}?</h2> <p>在 JavaScript 中，<code>function foo() {}</code> 和 <code>var foo = function() {}</code> 是两种不同的函数定义方式，它们在 <strong>作用域提升（Hoisting）</strong>、<strong>函数命名</strong> 和 <strong>使用场景</strong> 上有显著区别。以下是详细分析：</p> <hr> <h3 id="_1-函数声明-function-declaration-function-foo"><a href="#_1-函数声明-function-declaration-function-foo" class="header-anchor">#</a> <strong>1. 函数声明（Function Declaration）: <code>function foo() {}</code></strong></h3> <ul><li><p><strong>定义方式</strong>：直接命名并定义函数。</p></li> <li><p><strong>提升（Hoisting）</strong>：函数声明会被 <strong>整体提升</strong> 到作用域顶部，可以在声明前调用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正常执行，输出 &quot;Hello&quot;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>作用域</strong>：函数声明的作用域是整个包围它的函数或全局作用域。</p></li> <li><p><strong>特性</strong>：</p> <ul><li>函数名 <code>foo</code> 不可变（不能被重新赋值）。</li> <li>在严格模式下，函数声明在块级作用域（如 <code>if</code>、<code>for</code>）中的行为可能不一致（ES5 中无效，ES6+ 中允许但存在差异）。</li></ul></li></ul> <hr> <h3 id="_2-函数表达式-function-expression-var-foo-function"><a href="#_2-函数表达式-function-expression-var-foo-function" class="header-anchor">#</a> <strong>2. 函数表达式（Function Expression）: <code>var foo = function() {}</code></strong></h3> <ul><li><p><strong>定义方式</strong>：将匿名或具名函数赋值给变量。</p></li> <li><p><strong>提升（Hoisting）</strong>：变量 <code>foo</code> 的声明会被提升，但 <strong>赋值操作留在原地</strong>。在赋值前调用会抛出错误。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: foo is not a function</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>作用域</strong>：遵循变量作用域规则（函数级作用域）。</p></li> <li><p><strong>特性</strong>：</p> <ul><li><p>可以动态赋值（例如根据条件赋值不同函数）。</p></li> <li><p>允许具名函数表达式（<code>var foo = function bar() {}</code>），此时 <code>bar</code> 仅在函数内部可见。</p></li> <li><p>函数名可重新赋值（因为 <code>foo</code> 是变量）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 重新赋值</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;B&quot;</span>
</code></pre></div></li></ul></li></ul> <hr> <h3 id="对比表格-2"><a href="#对比表格-2" class="header-anchor">#</a> <strong>对比表格</strong></h3> <table><thead><tr><th><strong>特性</strong></th> <th><code>function foo() {}</code></th> <th><code>var foo = function() {}</code></th></tr></thead> <tbody><tr><td><strong>提升方式</strong></td> <td>函数整体提升，可在声明前调用</td> <td>变量声明提升，赋值不提升，声明前调用报错</td></tr> <tr><td><strong>作用域</strong></td> <td>整个包围函数/全局作用域</td> <td>遵循变量作用域规则（函数级作用域）</td></tr> <tr><td><strong>是否可重新赋值</strong></td> <td>否（函数名固定）</td> <td>是（变量值可重新赋值）</td></tr> <tr><td><strong>适用场景</strong></td> <td>通用函数定义</td> <td>动态赋值、回调函数、条件定义</td></tr> <tr><td><strong>具名函数内部可见性</strong></td> <td>函数名全局可见</td> <td>具名函数名仅在函数内部可见（如 <code>bar</code>）</td></tr></tbody></table> <hr> <h3 id="使用场景示例"><a href="#使用场景示例" class="header-anchor">#</a> <strong>使用场景示例</strong></h3> <h4 id="函数声明-推荐"><a href="#函数声明-推荐" class="header-anchor">#</a> <strong>函数声明（推荐）</strong></h4> <ul><li><p>定义工具函数或模块的核心逻辑。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">calculateSum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="函数表达式-灵活"><a href="#函数表达式-灵活" class="header-anchor">#</a> <strong>函数表达式（灵活）</strong></h4> <ul><li><p>动态赋值或条件逻辑：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> operation<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>useAddition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">operation</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">operation</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>作为回调函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Clicked!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="es6-补充"><a href="#es6-补充" class="header-anchor">#</a> <strong>ES6+ 补充</strong></h3> <ul><li><p><strong>箭头函数表达式</strong>：更简洁的函数表达式语法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>块级作用域声明（<code>let</code>/<code>const</code>）</strong>：避免变量提升问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 使用 let/const 声明函数表达式</span>
<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="总结-4"><a href="#总结-4" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>优先使用函数声明</strong>：当需要提升或定义明确的命名函数时。</li> <li><strong>选择函数表达式</strong>：需要动态赋值、条件定义或作为回调时。</li> <li><strong>注意作用域和提升规则</strong>：避免因提升导致的逻辑错误。</li></ul> <h2 id="explian-function-prototype-bind函数"><a href="#explian-function-prototype-bind函数" class="header-anchor">#</a> Explian <code>Function.prototype.bind</code>函数</h2> <p><code>Function.prototype.bind</code> 是 JavaScript 中的一个重要方法，用于<strong>显式绑定函数的执行上下文（<code>this</code>）</strong> 和 <strong>预设参数</strong>，返回一个新的函数。其核心作用是确保函数在调用时，<code>this</code> 始终指向指定的对象，无论调用方式如何变化。以下是其详细说明及用法：</p> <hr> <h3 id="_1-核心功能"><a href="#_1-核心功能" class="header-anchor">#</a> <strong>1. 核心功能</strong></h3> <ul><li><strong>绑定 <code>this</code></strong>：强制函数中的 <code>this</code> 指向指定的对象。</li> <li><strong>预设参数</strong>：提前固定部分参数，生成一个部分应用函数（Partial Application）。</li> <li><strong>返回新函数</strong>：原函数不受影响，<code>bind</code> 返回一个绑定了上下文和参数的新函数。</li></ul> <hr> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> <strong>语法</strong></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> boundFunc <span class="token operator">=</span> <span class="token function">originalFunc</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong><code>thisArg</code></strong>：绑定到函数的 <code>this</code> 值。</li> <li><strong><code>arg1, arg2, ...</code></strong>：可选参数，预设给新函数的参数。</li></ul> <hr> <h3 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> <strong>使用场景</strong></h3> <h4 id="场景-1-绑定-this-解决上下文丢失"><a href="#场景-1-绑定-this-解决上下文丢失" class="header-anchor">#</a> <strong>场景 1：绑定 <code>this</code> 解决上下文丢失</strong></h4> <p>当方法被单独调用时，<code>this</code> 可能指向全局对象或 <code>undefined</code>，<code>bind</code> 可固定 <code>this</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> greetFunc <span class="token operator">=</span> user<span class="token punctuation">.</span>greet<span class="token punctuation">;</span>
<span class="token function">greetFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误：this.name 为 undefined</span>

<span class="token keyword">const</span> boundGreet <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">boundGreet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正确：输出 &quot;Hello, Alice&quot;</span>
</code></pre></div><h4 id="场景-2-事件监听器绑定-this"><a href="#场景-2-事件监听器绑定-this" class="header-anchor">#</a> <strong>场景 2：事件监听器绑定 <code>this</code></strong></h4> <p>在事件处理中，确保回调函数的 <code>this</code> 指向组件实例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;Click me&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绑定 this</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正确指向 Button 实例</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> button<span class="token punctuation">.</span>handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="场景-3-预设参数-partial-application"><a href="#场景-3-预设参数-partial-application" class="header-anchor">#</a> <strong>场景 3：预设参数（Partial Application）</strong></h4> <p>提前固定部分参数，生成新函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> double <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 预设 a = 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 * 3 = 6</span>
</code></pre></div><hr> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> <strong>注意事项</strong></h3> <ol><li><p><strong>无法二次 <code>bind</code></strong>：<br>
多次调用 <code>bind</code> 时，只有第一次绑定的 <code>this</code> 生效：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> bound1 <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bound2 <span class="token operator">=</span> <span class="token function">bound1</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bound2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this 仍指向 { a: 1 }</span>
</code></pre></div></li> <li><p><strong>构造函数行为</strong>：<br>
若 <code>bind</code> 后的函数通过 <code>new</code> 调用，原绑定的 <code>this</code> 会被忽略（构造函数会创建新对象）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> BoundPerson <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoundPerson</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Person { name: &quot;Alice&quot; }, 而非 { id: 1 }</span>
</code></pre></div></li> <li><p><strong>箭头函数不可绑定 <code>this</code></strong>：<br>
箭头函数的 <code>this</code> 由词法作用域决定，<code>bind</code> 无效：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bound <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出外层 this（如 window）</span>
</code></pre></div></li></ol> <hr> <h3 id="与-call-apply-的区别"><a href="#与-call-apply-的区别" class="header-anchor">#</a> <strong>与 <code>call</code>/<code>apply</code> 的区别</strong></h3> <table><thead><tr><th><strong>方法</strong></th> <th>执行时机</th> <th>返回值</th> <th>参数传递方式</th></tr></thead> <tbody><tr><td><code>bind</code></td> <td>延迟执行</td> <td>新函数</td> <td>参数列表或预设参数</td></tr> <tr><td><code>call</code></td> <td>立即执行</td> <td>函数执行结果</td> <td>参数列表（逐个传递）</td></tr> <tr><td><code>apply</code></td> <td>立即执行</td> <td>函数执行结果</td> <td>参数数组</td></tr></tbody></table> <hr> <h2 id="请求竞态问题怎么处理"><a href="#请求竞态问题怎么处理" class="header-anchor">#</a> 请求竞态问题怎么处理</h2> <p>请求竞态可以使用三种方法进行解决，分别是<strong>请求中断</strong>，<strong>结果标记</strong>，<strong>时序锁</strong></p> <h3 id="请求中断"><a href="#请求中断" class="header-anchor">#</a> 请求中断</h3> <p>使用<code>AbortController</code>主动取消未完成的旧请求，确保只处理最后一次请求结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 存储当前请求的控制器</span>
<span class="token keyword">let</span> currentController <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 中断前一个未完成的请求</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentController<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentController<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 创建新控制器</span>
  <span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  currentController <span class="token operator">=</span> controller<span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/data?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 处理数据前确认是否为最新请求</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>controller<span class="token punctuation">.</span>signal<span class="token punctuation">.</span>aborted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">updateUI</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'AbortError'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'请求错误:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例：搜索框输入联想</span>
searchInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">fetchData</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="结果标记"><a href="#结果标记" class="header-anchor">#</a> 结果标记</h3> <p>为每个请求生成唯一标识，只处理最新标识对应的结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> lastRequestId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> requestId <span class="token operator">=</span> <span class="token operator">++</span>lastRequestId<span class="token punctuation">;</span>

  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/data?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 仅处理最新请求的结果</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestId <span class="token operator">===</span> lastRequestId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">updateUI</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="时序锁-防止重复提交"><a href="#时序锁-防止重复提交" class="header-anchor">#</a> 时序锁（防止重复提交）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> isFetching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isFetching<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  isFetching <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/submit'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token literal-property property">body</span><span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    isFetching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于流式接口，需要不断的处理后端发送过来的数据，应该使用<code>AbortControll</code>来进行中断，使用时序锁的方式，会导致获取到数据错乱</p> <h3 id="自定义封装hook"><a href="#自定义封装hook" class="header-anchor">#</a> 自定义封装hook</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">useAbortableFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> controllers <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> options<span class="token punctuation">.</span>key <span class="token operator">||</span> url<span class="token punctuation">;</span>
    
    <span class="token comment">// 中断前序相同 key 的请求</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>controllers<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      controllers<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    controllers<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> controller<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>options<span class="token punctuation">,</span>
        <span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'AbortError'</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      controllers<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> fetchData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用示例</span>
<span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">useAbortableFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleSearch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/search'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">search-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="请求缓存-版本控制"><a href="#请求缓存-版本控制" class="header-anchor">#</a> 请求缓存 + 版本控制</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cacheKey <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 命中缓存且未过期</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token parameter">cacheKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> timestamp<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> timestamp <span class="token operator">&lt;</span> <span class="token number">5000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/data?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">timestamp</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="总结-5"><a href="#总结-5" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>用途</strong>：解决 <code>this</code> 指向问题、预设参数、适配函数调用形式。</li> <li><strong>优势</strong>：灵活控制上下文，避免因调用方式导致的 <code>this</code> 丢失。</li> <li><strong>替代方案</strong>：箭头函数（自动绑定外层 <code>this</code>）或 Class 属性（如 <code>handleClick = () =&gt; {}</code>）。</li></ul> <p>通过合理使用 <code>bind</code>，可以更安全地管理函数执行上下文，提升代码的可维护性。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge/interview/html.html" class="prev">
        HTML
      </a></span> <span class="next"><a href="/knowledge/GFE/01.debounce/">
        Debounce
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge/assets/js/app.5153ca81.js" defer></script><script src="/knowledge/assets/js/2.09711cee.js" defer></script><script src="/knowledge/assets/js/1.ecac6abe.js" defer></script><script src="/knowledge/assets/js/71.12f2ab04.js" defer></script>
  </body>
</html>
