<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTML相关面试题 | 邓攀的技术博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.ef1330c5.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.d13ce116.js" as="script"><link rel="preload" href="/knowledge/assets/js/2.bc15d414.js" as="script"><link rel="preload" href="/knowledge/assets/js/1.6c0ff8f4.js" as="script"><link rel="preload" href="/knowledge/assets/js/67.19eee347.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.e193d6c0.js"><link rel="prefetch" href="/knowledge/assets/js/11.8e802c1e.js"><link rel="prefetch" href="/knowledge/assets/js/12.65553447.js"><link rel="prefetch" href="/knowledge/assets/js/13.2be48d38.js"><link rel="prefetch" href="/knowledge/assets/js/14.fbcaafc6.js"><link rel="prefetch" href="/knowledge/assets/js/15.e40ead57.js"><link rel="prefetch" href="/knowledge/assets/js/16.49184ae1.js"><link rel="prefetch" href="/knowledge/assets/js/17.dc3323dd.js"><link rel="prefetch" href="/knowledge/assets/js/18.648b10c4.js"><link rel="prefetch" href="/knowledge/assets/js/19.2a696a53.js"><link rel="prefetch" href="/knowledge/assets/js/20.89f58454.js"><link rel="prefetch" href="/knowledge/assets/js/21.0e698439.js"><link rel="prefetch" href="/knowledge/assets/js/22.2951858e.js"><link rel="prefetch" href="/knowledge/assets/js/23.fad55543.js"><link rel="prefetch" href="/knowledge/assets/js/24.1811a1e3.js"><link rel="prefetch" href="/knowledge/assets/js/25.7d611585.js"><link rel="prefetch" href="/knowledge/assets/js/26.2706e843.js"><link rel="prefetch" href="/knowledge/assets/js/27.2ffa03e5.js"><link rel="prefetch" href="/knowledge/assets/js/28.2e367c11.js"><link rel="prefetch" href="/knowledge/assets/js/29.cb85613d.js"><link rel="prefetch" href="/knowledge/assets/js/3.f74b7660.js"><link rel="prefetch" href="/knowledge/assets/js/30.652b9bc5.js"><link rel="prefetch" href="/knowledge/assets/js/31.e2d5d8ed.js"><link rel="prefetch" href="/knowledge/assets/js/32.2097c650.js"><link rel="prefetch" href="/knowledge/assets/js/33.c3b9402b.js"><link rel="prefetch" href="/knowledge/assets/js/34.9690a5a6.js"><link rel="prefetch" href="/knowledge/assets/js/35.a3e2d1a4.js"><link rel="prefetch" href="/knowledge/assets/js/36.40ee0a89.js"><link rel="prefetch" href="/knowledge/assets/js/37.e5c4e5c6.js"><link rel="prefetch" href="/knowledge/assets/js/38.3da1edcd.js"><link rel="prefetch" href="/knowledge/assets/js/39.dde21d94.js"><link rel="prefetch" href="/knowledge/assets/js/4.d0407187.js"><link rel="prefetch" href="/knowledge/assets/js/40.183865a3.js"><link rel="prefetch" href="/knowledge/assets/js/41.fbed79bd.js"><link rel="prefetch" href="/knowledge/assets/js/42.ddb9e519.js"><link rel="prefetch" href="/knowledge/assets/js/43.d8c6b670.js"><link rel="prefetch" href="/knowledge/assets/js/44.b8600c23.js"><link rel="prefetch" href="/knowledge/assets/js/45.8fdbb89e.js"><link rel="prefetch" href="/knowledge/assets/js/46.2c0b6696.js"><link rel="prefetch" href="/knowledge/assets/js/47.ba0b752b.js"><link rel="prefetch" href="/knowledge/assets/js/48.77af7173.js"><link rel="prefetch" href="/knowledge/assets/js/49.4165aa91.js"><link rel="prefetch" href="/knowledge/assets/js/5.6b5b30dd.js"><link rel="prefetch" href="/knowledge/assets/js/50.02a683f2.js"><link rel="prefetch" href="/knowledge/assets/js/51.377c538d.js"><link rel="prefetch" href="/knowledge/assets/js/52.2b8cd451.js"><link rel="prefetch" href="/knowledge/assets/js/53.b6fbea0a.js"><link rel="prefetch" href="/knowledge/assets/js/54.465ac807.js"><link rel="prefetch" href="/knowledge/assets/js/55.0dbe2c3d.js"><link rel="prefetch" href="/knowledge/assets/js/56.58d40823.js"><link rel="prefetch" href="/knowledge/assets/js/57.cd68dd2d.js"><link rel="prefetch" href="/knowledge/assets/js/58.ab749b89.js"><link rel="prefetch" href="/knowledge/assets/js/59.d290e425.js"><link rel="prefetch" href="/knowledge/assets/js/6.ded172f2.js"><link rel="prefetch" href="/knowledge/assets/js/60.3c53fd43.js"><link rel="prefetch" href="/knowledge/assets/js/61.5f83939f.js"><link rel="prefetch" href="/knowledge/assets/js/62.73a942e4.js"><link rel="prefetch" href="/knowledge/assets/js/63.0838cf95.js"><link rel="prefetch" href="/knowledge/assets/js/64.d3240197.js"><link rel="prefetch" href="/knowledge/assets/js/65.80115882.js"><link rel="prefetch" href="/knowledge/assets/js/66.b3f1a356.js"><link rel="prefetch" href="/knowledge/assets/js/68.8be7df47.js"><link rel="prefetch" href="/knowledge/assets/js/69.20fbf51a.js"><link rel="prefetch" href="/knowledge/assets/js/7.48ee682d.js"><link rel="prefetch" href="/knowledge/assets/js/70.be66b6a3.js"><link rel="prefetch" href="/knowledge/assets/js/71.1cb926bc.js"><link rel="prefetch" href="/knowledge/assets/js/72.a00945dc.js"><link rel="prefetch" href="/knowledge/assets/js/73.a2552003.js"><link rel="prefetch" href="/knowledge/assets/js/74.cbe8f2ff.js"><link rel="prefetch" href="/knowledge/assets/js/75.0d9796c1.js"><link rel="prefetch" href="/knowledge/assets/js/76.81666afa.js"><link rel="prefetch" href="/knowledge/assets/js/77.c982ce9e.js"><link rel="prefetch" href="/knowledge/assets/js/78.cdad9a20.js"><link rel="prefetch" href="/knowledge/assets/js/79.f5c2f5e9.js"><link rel="prefetch" href="/knowledge/assets/js/80.f34dff30.js"><link rel="prefetch" href="/knowledge/assets/js/81.a63fca8d.js"><link rel="prefetch" href="/knowledge/assets/js/vendors~docsearch.94b65286.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.ef1330c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">邓攀的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge/" aria-current="page" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><a href="/knowledge/vue" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/vue/响应式.html" class="sidebar-link">响应式</a></li><li><a href="/knowledge/vue/编译.html" class="sidebar-link">编译</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/react" class="sidebar-heading clickable"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/react/JSX.html" class="sidebar-link">JSX</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/typescript" class="sidebar-heading clickable"><span>TypeScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/typescript/type-challenges.html" class="sidebar-link">类型体操</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/nextjs" class="sidebar-heading clickable"><span>nextjs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/nextjs/docs.html" class="sidebar-link">文档</a></li><li><a href="/knowledge/nextjs/use.html" class="sidebar-link">使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/algorithm" class="sidebar-heading clickable"><span>算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/algorithm/二分查找.html" class="sidebar-link">二分查找</a></li><li><a href="/knowledge/algorithm/大数相加.html" class="sidebar-link">大数相加</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/system-design" class="sidebar-heading clickable"><span>系统设计</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/system-design/news-feed.html" class="sidebar-link">news feed</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/interview" class="sidebar-heading clickable router-link-active open"><span>面试相关</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/interview/html.html" aria-current="page" class="active sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_1-what-does-a-doctype-do-doctype是做什么的" class="sidebar-link">1. What does a doctype do?, doctype是做什么的？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_2-how-do-you-serve-a-page-with-content-in-multiple-languages-如何配置多语言页面的内容" class="sidebar-link">2. How do you serve a page with content in multiple languages? 如何配置多语言页面的内容？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_3-what-are-data-attributes-good-for-data-属性有什么好处" class="sidebar-link">3. What are data- attributes good for? data-属性有什么好处？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_4-the-difference-betwee-a-cookie-sessionstorge-and-localstorge" class="sidebar-link">4. the difference betwee a cookie, sessionStorge and localStorge</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_5-describe-the-difference-between-script-script-async-and-script-defer" class="sidebar-link">5. Describe the difference between &lt;script&gt;, &lt;script async&gt; and &lt;script defer&gt;</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_6-why-is-it-generally-a-good-idea-to-position-css-link-s-between-head-head-and-js-script-s-just-before-body-do-you-know-any-exceptions" class="sidebar-link">6. Why is it generally a good idea to position CSS &lt;link&gt;s between &lt;head&gt;&lt;/head&gt; and JS &lt;script&gt;s just before &lt;/body&gt;? Do you know any exceptions?</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_7-what-is-progressive-rendering-什么是渐进式渲染" class="sidebar-link">7. What is progressive rendering? 什么是渐进式渲染？</a></li><li class="sidebar-sub-header"><a href="/knowledge/interview/html.html#_8-canvas与svg的区别" class="sidebar-link">8. canvas与svg的区别</a></li></ul></li><li><a href="/knowledge/interview/JavaScript.html" class="sidebar-link">JavaScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/GFE" class="sidebar-heading clickable"><span>GFE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/GFE/01.debounce/" class="sidebar-link">Debounce</a></li><li><a href="/knowledge/GFE/02.myReduce/" class="sidebar-link">MyReduce</a></li><li><a href="/knowledge/GFE/03.classnames/" class="sidebar-link">ClassNames</a></li><li><a href="/knowledge/GFE/04.flatten/" class="sidebar-link">Flatten</a></li><li><a href="/knowledge/GFE/05.throttle/" class="sidebar-link">Throttle</a></li><li><a href="/knowledge/GFE/06.Type%20Utilities/" class="sidebar-link">Type Utilities</a></li><li><a href="/knowledge/GFE/07.Type%20Utilities%20II/" class="sidebar-link">Type Utilities II</a></li><li><a href="/knowledge/GFE/08.Promise.all/" class="sidebar-link">Promise.all</a></li><li><a href="/knowledge/GFE/09.Data%20Merging/" class="sidebar-link">Data Merging</a></li><li><a href="/knowledge/GFE/10.Deep%20Clone/" class="sidebar-link">Deep Clone</a></li><li><a href="/knowledge/GFE/11.Event%20Emitter/" class="sidebar-link">Event Emitter</a></li><li><a href="/knowledge/GFE/12.getElementsByStyle/" class="sidebar-link">getElementsByStyle</a></li><li><a href="/knowledge/GFE/13.Function.prototype.call/" class="sidebar-link">Function.prototype.call</a></li><li><a href="/knowledge/GFE/14.List%20Format/" class="sidebar-link">List Format</a></li><li><a href="/knowledge/GFE/15.Map%20Async%20Limit/" class="sidebar-link">Map Async Limit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/Blind" class="sidebar-heading clickable"><span>Blind</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/Blind/01.Balanced%20Brackets/" class="sidebar-link">Balanced Brackets</a></li><li><a href="/knowledge/Blind/02.Find%20Duplicates%20in%20Array/" class="sidebar-link">Find Duplicates in Array</a></li><li><a href="/knowledge/Blind/03.Find%20Missing%20Number%20in%20Sequence/" class="sidebar-link">Find Missing Number in Sequence</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/git" class="sidebar-heading clickable"><span>Git</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/git/commit.html" class="sidebar-link">commit</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="html相关面试题"><a href="#html相关面试题" class="header-anchor">#</a> <code>HTML</code>相关面试题</h1> <h2 id="_1-what-does-a-doctype-do-doctype是做什么的"><a href="#_1-what-does-a-doctype-do-doctype是做什么的" class="header-anchor">#</a> 1. <code>What does a doctype do?</code>, <code>doctype</code>是做什么的？</h2> <p>HTML 的 <code>&lt;!DOCTYPE&gt;</code> 声明（文档类型声明）是每个 HTML 文档<strong>必须包含的第一行代码</strong>，它的核心作用是<strong>告知浏览器如何正确解析和渲染页面</strong>。以下是其详细作用与功能：</p> <hr> <h3 id="_1-指定-html-版本"><a href="#_1-指定-html-版本" class="header-anchor">#</a> <strong>1. 指定 HTML 版本</strong></h3> <ul><li><p><strong>明确文档标准</strong>：<code>&lt;!DOCTYPE&gt;</code> 告诉浏览器当前页面遵循的 HTML 或 XHTML 规范。例如：</p> <ul><li><p><strong>HTML5</strong>：<code>&lt;!DOCTYPE html&gt;</code>（简洁且无需版本号）。</p></li> <li><p><strong>HTML4.01</strong>：需引用 DTD（文档类型定义），如严格模式：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span> <span class="token string">&quot;http://www.w3.org/TR/html4/strict.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>XHTML</strong>：需包含 XML 命名空间，如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span> <span class="token string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ul> <hr> <h3 id="_2-触发浏览器的「标准模式」"><a href="#_2-触发浏览器的「标准模式」" class="header-anchor">#</a> <strong>2. 触发浏览器的「标准模式」</strong></h3> <ul><li><strong>避免怪异模式（Quirks Mode）</strong>：<br>
如果省略 <code>&lt;!DOCTYPE&gt;</code>，浏览器会进入<strong>怪异模式</strong>，以兼容早期非标准代码。此模式下：
<ul><li>盒模型（Box Model）计算错误（如 <code>width</code> 包含内边距和边框）。</li> <li>某些 CSS 样式（如 <code>margin: auto</code> 居中）失效。</li> <li>旧版 JavaScript API 可能被启用。</li></ul></li> <li><strong>标准模式（Standards Mode）</strong>：<br>
正确声明 <code>&lt;!DOCTYPE&gt;</code> 后，浏览器遵循 W3C 标准渲染页面，确保布局和功能的一致性。</li></ul> <hr> <h3 id="_3-辅助验证工具与解析器"><a href="#_3-辅助验证工具与解析器" class="header-anchor">#</a> <strong>3. 辅助验证工具与解析器</strong></h3> <ul><li><strong>历史作用</strong>：旧版 HTML 依赖 DTD 验证文档结构（如标签嵌套是否合法）。现代 HTML5 已简化此过程，但验证工具仍可能参考 <code>&lt;!DOCTYPE&gt;</code>。</li> <li><strong>现代意义</strong>：HTML5 的 <code>&lt;!DOCTYPE html&gt;</code> 去除了复杂的 DTD 引用，直接声明文档遵循最新标准。</li></ul> <hr> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> <strong>注意事项</strong></h3> <ol><li><strong>必须位于文档首行</strong>：<code>&lt;!DOCTYPE&gt;</code> 前不能有任何内容（包括空格或注释）。</li> <li><strong>HTML5 的简化写法</strong>：仅需 <code>&lt;!DOCTYPE html&gt;</code>，且不区分大小写（如 <code>&lt;!doctype html&gt;</code> 也有效）。</li> <li><strong>跨浏览器兼容性</strong>：正确使用可减少不同浏览器渲染差异。</li></ol> <hr> <h3 id="示例代码"><a href="#示例代码" class="header-anchor">#</a> <strong>示例代码</strong></h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>标准 HTML5 页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这是一个符合标准的页面。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>核心功能</strong>：定义文档标准、触发标准渲染模式、辅助验证。</li> <li><strong>开发者价值</strong>：确保页面按预期渲染，避免布局“玄学问题”。</li> <li><strong>现代实践</strong>：始终使用 <code>&lt;!DOCTYPE html&gt;</code>（HTML5 声明），无需其他复杂配置。</li></ul> <h2 id="_2-how-do-you-serve-a-page-with-content-in-multiple-languages-如何配置多语言页面的内容"><a href="#_2-how-do-you-serve-a-page-with-content-in-multiple-languages-如何配置多语言页面的内容" class="header-anchor">#</a> 2. <code>How do you serve a page with content in multiple languages?</code> 如何配置多语言页面的内容？</h2> <p>配置多语言页面需要结合 <strong>前端结构、后端逻辑、SEO 优化</strong> 和 <strong>用户体验设计</strong>，以下是详细的实现方案：</p> <hr> <h3 id="一、基础配置"><a href="#一、基础配置" class="header-anchor">#</a> <strong>一、基础配置</strong></h3> <h4 id="_1-声明页面语言"><a href="#_1-声明页面语言" class="header-anchor">#</a> 1. <strong>声明页面语言</strong></h4> <ul><li><p><strong>HTML 根标签</strong>：使用 <code>lang</code> 属性声明主语言</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh-CN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 主语言为简体中文 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>局部覆盖</strong>：为特定内容块设置其他语言</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This paragraph is in English.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h4 id="_2-http-头部声明"><a href="#_2-http-头部声明" class="header-anchor">#</a> 2. <strong>HTTP 头部声明</strong></h4> <ul><li><p>通过 <code>Content-Language</code> 标头告知浏览器页面支持的语言：</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">Content-Language</span><span class="token punctuation">:</span> <span class="token header-value">zh-CN, en, ja</span></span>
</code></pre></div></li></ul> <hr> <h3 id="二、url-结构设计"><a href="#二、url-结构设计" class="header-anchor">#</a> <strong>二、URL 结构设计</strong></h3> <h4 id="_1-路径模式-推荐"><a href="#_1-路径模式-推荐" class="header-anchor">#</a> 1. <strong>路径模式（推荐）</strong></h4> <ul><li><p><strong>示例</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>https://example.com/zh/about    # 中文
https://example.com/en/about    # 英文
https://example.com/ja/about    # 日文
</code></pre></div></li> <li><p><strong>实现方式</strong>：</p> <ul><li><strong>静态站点</strong>：为每种语言创建独立目录（如 <code>/zh/</code>, <code>/en/</code>）。</li> <li><strong>动态站点</strong>：通过路由参数处理（如 <code>/about?lang=zh</code>）。</li></ul></li></ul> <h4 id="_2-子域名模式"><a href="#_2-子域名模式" class="header-anchor">#</a> 2. <strong>子域名模式</strong></h4> <ul><li><p><strong>示例</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>https://zh.example.com/about    # 中文子域名
https://en.example.com/about    # 英文子域名
</code></pre></div></li> <li><p><strong>优点</strong>：SEO 友好，语言隔离清晰。</p></li> <li><p><strong>缺点</strong>：需配置多域名和 SSL 证书。</p></li></ul> <hr> <h3 id="三、服务器端处理"><a href="#三、服务器端处理" class="header-anchor">#</a> <strong>三、服务器端处理</strong></h3> <h4 id="_1-自动语言重定向"><a href="#_1-自动语言重定向" class="header-anchor">#</a> 1. <strong>自动语言重定向</strong></h4> <ul><li><p><strong>逻辑</strong>：根据 <code>Accept-Language</code> 请求头自动跳转到对应语言版本。</p></li> <li><p><strong>代码示例（Node.js）</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> acceptLanguage <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&quot;accept-language&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> userLang <span class="token operator">=</span> acceptLanguage<span class="token operator">?.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userLang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/home</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_2-多语言资源加载"><a href="#_2-多语言资源加载" class="header-anchor">#</a> 2. <strong>多语言资源加载</strong></h4> <ul><li><p><strong>JSON 文件管理翻译内容</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>/locales
  ├─ en.json
  ├─ zh.json
  └─ ja.json
</code></pre></div></li> <li><p><strong>动态加载示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/locales/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userLang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">translations</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderPage</span><span class="token punctuation">(</span>translations<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="四、前端动态切换"><a href="#四、前端动态切换" class="header-anchor">#</a> <strong>四、前端动态切换</strong></h3> <h4 id="_1-语言切换器"><a href="#_1-语言切换器" class="header-anchor">#</a> 1. <strong>语言切换器</strong></h4> <ul><li><p><strong>UI 组件</strong>：下拉菜单或按钮组</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lang-switcher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>中文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>English<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ja<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>日本語<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>逻辑实现</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;lang-switcher&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> lang <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_2-持久化用户偏好"><a href="#_2-持久化用户偏好" class="header-anchor">#</a> 2. <strong>持久化用户偏好</strong></h4> <ul><li><p><strong>Cookie 或 localStorage</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 存储用户选择</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;preferredLang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取时优先使用用户设置</span>
<span class="token keyword">const</span> lang <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;preferredLang&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> navigator<span class="token punctuation">.</span>language<span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="五、seo-优化"><a href="#五、seo-优化" class="header-anchor">#</a> <strong>五、SEO 优化</strong></h3> <h4 id="_1-hreflang-标注"><a href="#_1-hreflang-标注" class="header-anchor">#</a> 1. <strong><code>hreflang</code> 标注</strong></h4> <ul><li><p>在 <code>&lt;head&gt;</code> 中声明多语言页面的关系：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alternate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hreflang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/zh/about<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alternate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hreflang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/en/about<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alternate<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">hreflang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-default<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/en/about<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul> <h4 id="_2-规范链接-canonical-url"><a href="#_2-规范链接-canonical-url" class="header-anchor">#</a> 2. <strong>规范链接（Canonical URL）</strong></h4> <ul><li><p>避免重复内容惩罚：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canonical<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/zh/about<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="六、开发工具与框架"><a href="#六、开发工具与框架" class="header-anchor">#</a> <strong>六、开发工具与框架</strong></h3> <h4 id="_1-静态站点生成器"><a href="#_1-静态站点生成器" class="header-anchor">#</a> 1. <strong>静态站点生成器</strong></h4> <ul><li><p><strong>Hugo</strong>：原生多语言支持，通过 <code>config.toml</code> 配置：</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">languages.zh</span><span class="token punctuation">]</span>
<span class="token key property">languageName</span> <span class="token punctuation">=</span> <span class="token string">&quot;中文&quot;</span>
<span class="token key property">weight</span> <span class="token punctuation">=</span> <span class="token number">1</span>
<span class="token punctuation">[</span><span class="token table class-name">languages.en</span><span class="token punctuation">]</span>
<span class="token key property">languageName</span> <span class="token punctuation">=</span> <span class="token string">&quot;English&quot;</span>
<span class="token key property">weight</span> <span class="token punctuation">=</span> <span class="token number">2</span>
</code></pre></div></li> <li><p><strong>Jekyll</strong>：使用 <code>_data</code> 文件夹管理翻译内容。</p></li></ul> <h4 id="_2-前端国际化库"><a href="#_2-前端国际化库" class="header-anchor">#</a> 2. <strong>前端国际化库</strong></h4> <ul><li><p><strong>i18next</strong>（React/Vue/Angular 通用）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">&quot;i18next&quot;</span><span class="token punctuation">;</span>
i18n<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">lng</span><span class="token operator">:</span> <span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resources</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">en</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">translation</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">welcome</span><span class="token operator">:</span> <span class="token string">&quot;Welcome!&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">zh</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">translation</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">welcome</span><span class="token operator">:</span> <span class="token string">&quot;欢迎！&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>React Intl</strong>：专为 React 设计的库，支持复数、日期格式化等。</p></li></ul> <hr> <h3 id="七、测试与验证"><a href="#七、测试与验证" class="header-anchor">#</a> <strong>七、测试与验证</strong></h3> <h4 id="_1-浏览器模拟"><a href="#_1-浏览器模拟" class="header-anchor">#</a> 1. <strong>浏览器模拟</strong></h4> <ul><li><strong>Chrome DevTools</strong>：<br> <code>F12 → Sensors → Override</code> 中模拟不同语言环境。</li> <li><strong>多语言内容检查</strong>：<br>
确保文字溢出、字体支持、RTL（如阿拉伯语）布局正常。</li></ul> <h4 id="_2-seo-检查工具"><a href="#_2-seo-检查工具" class="header-anchor">#</a> 2. <strong>SEO 检查工具</strong></h4> <ul><li><strong>Google Search Console</strong>：验证 <code>hreflang</code> 标注是否正确。</li> <li><strong>Ahrefs/Screaming Frog</strong>：抓取多语言页面结构。</li></ul> <hr> <h3 id="八、完整示例-react-i18next"><a href="#八、完整示例-react-i18next" class="header-anchor">#</a> <strong>八、完整示例（React + i18next）</strong></h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 初始化 i18n</span>
<span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">&quot;i18next&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initReactI18next <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-i18next&quot;</span><span class="token punctuation">;</span>

i18n<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>initReactI18next<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">resources</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">en</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">translation</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">zh</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">translation</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;你好，世界&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lng</span><span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;lang&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 语言切换组件</span>
<span class="token keyword">function</span> <span class="token function">LanguageSwitcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>select onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i18n<span class="token punctuation">.</span><span class="token function">changeLanguage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>English<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;zh&quot;</span><span class="token operator">&gt;</span>中文<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. 使用翻译内容</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h3 id="九、注意事项"><a href="#九、注意事项" class="header-anchor">#</a> <strong>九、注意事项</strong></h3> <ol><li><strong>翻译一致性</strong>：专业翻译避免机器直译，尤其是专业术语。</li> <li><strong>动态内容处理</strong>：如日期、货币、单位需本地化（如 <code>Intl.DateTimeFormat</code>）。</li> <li><strong>性能优化</strong>：按需加载语言包，避免首次加载过慢。</li> <li><strong>无障碍（A11Y）</strong>：为语言切换按钮添加 <code>aria-label</code>。</li></ol> <p>通过以上方案，可实现高效、可维护的多语言页面，兼顾用户体验和搜索引擎友好性。</p> <h2 id="_3-what-are-data-attributes-good-for-data-属性有什么好处"><a href="#_3-what-are-data-attributes-good-for-data-属性有什么好处" class="header-anchor">#</a> 3. <code>What are data- attributes good for?</code> <code>data-</code>属性有什么好处？</h2> <p><code>data-*</code> 属性是 HTML5 中用于在 HTML 元素上<strong>存储自定义数据</strong>的标准方式。它们为开发者提供了一种灵活且符合标准的机制，用于关联与 DOM 元素相关的额外信息。以下是其核心用途和优势：</p> <hr> <h3 id="_1-存储与-dom-关联的私有数据"><a href="#_1-存储与-dom-关联的私有数据" class="header-anchor">#</a> <strong>1. 存储与 DOM 关联的私有数据</strong></h3> <ul><li><p><strong>场景</strong>：保存元素的状态、配置或元数据，无需暴露给用户或影响渲染。</p></li> <li><p><strong>示例</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-modal-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userProfile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>open<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dark<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Open Profile
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>通过 <code>data-*</code> 属性存储按钮控制的弹窗 ID、操作类型和主题样式。</p></li></ul> <hr> <h3 id="_2-在-javascript-中快速访问数据"><a href="#_2-在-javascript-中快速访问数据" class="header-anchor">#</a> <strong>2. 在 JavaScript 中快速访问数据</strong></h3> <ul><li><p><strong>直接访问</strong>：通过 <code>element.dataset</code> API 读取或修改数据。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>modalId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;userProfile&quot;</span>
button<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>theme <span class="token operator">=</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 动态更新数据</span>
</code></pre></div></li> <li><p><strong>兼容性</strong>：所有现代浏览器均支持 <code>dataset</code> 属性。</p></li></ul> <hr> <h3 id="_3-与-css-交互实现动态样式"><a href="#_3-与-css-交互实现动态样式" class="header-anchor">#</a> <strong>3. 与 CSS 交互实现动态样式</strong></h3> <ul><li><p><strong>基于数据的样式控制</strong>：通过 CSS 属性选择器，根据 <code>data-*</code> 值应用样式。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">button[data-theme=&quot;dark&quot;]</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">button[data-action=&quot;close&quot;]::after</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;×&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <h3 id="_4-增强代码可读性和维护性"><a href="#_4-增强代码可读性和维护性" class="header-anchor">#</a> <strong>4. 增强代码可读性和维护性</strong></h3> <ul><li><strong>语义化</strong>：通过命名清晰的 <code>data-*</code> 属性，明确元素用途（如 <code>data-toggle=&quot;collapse&quot;</code>）。</li> <li><strong>替代方案对比</strong>：
<ul><li><strong>不推荐</strong>：用隐藏的 <code>&lt;input&gt;</code> 或非标准属性（如 <code>custom-data</code>）存储数据。</li> <li><strong>推荐</strong>：使用 <code>data-*</code> 符合标准，避免潜在冲突。</li></ul></li></ul> <hr> <h3 id="_5-框架集成与状态管理"><a href="#_5-框架集成与状态管理" class="header-anchor">#</a> <strong>5. 框架集成与状态管理</strong></h3> <ul><li><p><strong>前端框架</strong>：React、Vue 等框架利用 <code>data-*</code> 属性传递组件状态或配置。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// React 示例</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-testid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-visible</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isVisible<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span>users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">User</span></span> <span class="token attr-name">data-user-id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>测试工具</strong>：测试库（如 Testing Library）推荐用 <code>data-testid</code> 定位元素，避免依赖不稳定的 CSS 类名。</p></li></ul> <hr> <h3 id="_6-支持复杂交互逻辑"><a href="#_6-支持复杂交互逻辑" class="header-anchor">#</a> <strong>6. 支持复杂交互逻辑</strong></h3> <ul><li><p><strong>动态内容加载</strong>：存储 AJAX 请求所需的参数。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-endpoint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/api/comments<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sort-by</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>事件委托</strong>：通过 <code>data-*</code> 识别事件来源。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&quot;delete&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">deleteItem</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>itemId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h3 id="_7-避免全局变量污染"><a href="#_7-避免全局变量污染" class="header-anchor">#</a> <strong>7. 避免全局变量污染</strong></h3> <ul><li><p><strong>数据隔离</strong>：将数据直接绑定到相关元素，而非存储在全局对象中。</p></li> <li><p><strong>示例对比</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 不推荐：全局变量 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> currentPage <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 推荐：data-* 属性 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-current-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="_8-注意事项"><a href="#_8-注意事项" class="header-anchor">#</a> <strong>8. 注意事项</strong></h3> <ul><li><p><strong>命名规范</strong>：仅使用小写字母和连字符（如 <code>data-user-id</code>，而非 <code>data-userID</code>）。</p></li> <li><p><strong>数据类型</strong>：值始终为字符串，复杂数据需序列化（如 JSON）：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{&quot;id&quot;:123, &quot;name&quot;:&quot;John&quot;}<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>性能</strong>：避免滥用，大量 <code>data-*</code> 属性可能影响 DOM 性能。</p></li></ul> <hr> <h3 id="典型应用场景"><a href="#典型应用场景" class="header-anchor">#</a> <strong>典型应用场景</strong></h3> <ol><li><strong>UI 组件配置</strong>（如轮播图分页参数）。</li> <li><strong>表单验证规则</strong>（如 <code>data-validate=&quot;email&quot;</code>）。</li> <li><strong>国际化</strong>（存储翻译键 <code>data-i18n=&quot;welcome_message&quot;</code>）。</li> <li><strong>埋点与统计</strong>（记录交互事件 <code>data-track=&quot;click&quot;</code>）。</li></ol> <hr> <p>通过合理使用 <code>data-*</code> 属性，可以显著提升代码的可维护性、可读性，同时确保遵循 Web 标准。</p> <h2 id="_4-the-difference-betwee-a-cookie-sessionstorge-and-localstorge"><a href="#_4-the-difference-betwee-a-cookie-sessionstorge-and-localstorge" class="header-anchor">#</a> 4. <code>the difference betwee a cookie, sessionStorge and localStorge</code></h2> <p>The differences between cookies, <code>sessionStorage</code>, and <code>localStorage</code> can be categorized by their <strong>storage capacity</strong>, <strong>lifespan</strong>, <strong>scope</strong>, <strong>server interaction</strong>, and <strong>use cases</strong>. Here's a structured breakdown:</p> <hr> <h3 id="_1-storage-capacity"><a href="#_1-storage-capacity" class="header-anchor">#</a> <strong>1. Storage Capacity</strong></h3> <table><thead><tr><th>Type</th> <th>Capacity</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>~4 KB per cookie</td></tr> <tr><td><strong>localStorage</strong></td> <td>~5-10 MB per origin</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>~5-10 MB per origin</td></tr></tbody></table> <ul><li><strong>Cookies</strong> are limited and sent with every HTTP request, so they’re ideal for small data like session IDs.</li> <li><strong>Web Storage</strong> (<code>localStorage</code>/<code>sessionStorage</code>) is designed for larger client-side data.</li></ul> <hr> <h3 id="_2-lifespan"><a href="#_2-lifespan" class="header-anchor">#</a> <strong>2. Lifespan</strong></h3> <table><thead><tr><th>Type</th> <th>Persistence</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>Expires based on <code>Expires</code> or <code>Max-Age</code> attribute (or deleted manually).</td></tr> <tr><td><strong>localStorage</strong></td> <td>Persists until explicitly cleared (survives browser restarts).</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>Cleared when the <strong>tab/browser is closed</strong> (tied to a page session).</td></tr></tbody></table> <hr> <h3 id="_3-scope"><a href="#_3-scope" class="header-anchor">#</a> <strong>3. Scope</strong></h3> <table><thead><tr><th>Type</th> <th>Accessibility</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>Sent to the server for <strong>matching domain/path</strong> (configurable via attributes).</td></tr> <tr><td><strong>localStorage</strong></td> <td>Shared across <strong>all tabs/windows</strong> of the same origin (protocol + domain + port).</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>Isolated to the <strong>specific tab</strong> that created it (other tabs won’t share it).</td></tr></tbody></table> <hr> <h3 id="_4-server-interaction"><a href="#_4-server-interaction" class="header-anchor">#</a> <strong>4. Server Interaction</strong></h3> <table><thead><tr><th>Type</th> <th>Sent to Server?</th> <th>Client/Server Access</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>Yes (with every HTTP request via <code>Cookie</code> header).</td> <td>Both server (reads cookies) and client (JavaScript).</td></tr> <tr><td><strong>localStorage</strong></td> <td>No</td> <td>Client-side only (JavaScript API).</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>No</td> <td>Client-side only (JavaScript API).</td></tr></tbody></table> <hr> <h3 id="_5-security"><a href="#_5-security" class="header-anchor">#</a> <strong>5. Security</strong></h3> <table><thead><tr><th>Type</th> <th>Key Risks &amp; Protections</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>- Vulnerable to CSRF (mitigated via <code>SameSite</code> attribute).<br>- Secure with <code>HttpOnly</code> (blocks JS access) and <code>Secure</code> (HTTPS-only).</td></tr> <tr><td><strong>localStorage</strong></td> <td>- Accessible via JavaScript, making it vulnerable to XSS attacks.</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>- Same risks as <code>localStorage</code> (XSS vulnerabilities).</td></tr></tbody></table> <hr> <h3 id="_6-api-syntax"><a href="#_6-api-syntax" class="header-anchor">#</a> <strong>6. API &amp; Syntax</strong></h3> <table><thead><tr><th>Type</th> <th>Example Code</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td><code>js&lt;br&gt;document.cookie = &quot;user=John; expires=Fri, 31 Dec 2023 23:59:59 GMT; path=/&quot;;&lt;br&gt;</code></td></tr> <tr><td><strong>localStorage</strong></td> <td><code>js&lt;br&gt;localStorage.setItem('theme', 'dark');&lt;br&gt;const theme = localStorage.getItem('theme');&lt;br&gt;</code></td></tr> <tr><td><strong>sessionStorage</strong></td> <td><code>js&lt;br&gt;sessionStorage.setItem('formData', JSON.stringify(data));&lt;br&gt;</code></td></tr></tbody></table> <hr> <h3 id="_7-typical-use-cases"><a href="#_7-typical-use-cases" class="header-anchor">#</a> <strong>7. Typical Use Cases</strong></h3> <table><thead><tr><th>Type</th> <th>When to Use</th></tr></thead> <tbody><tr><td><strong>Cookies</strong></td> <td>- Authentication tokens (e.g., <code>session-id</code>).<br>- Tracking user activity (e.g., GDPR consent).</td></tr> <tr><td><strong>localStorage</strong></td> <td>- Persistent user preferences (e.g., dark mode).<br>- Offline data caching.</td></tr> <tr><td><strong>sessionStorage</strong></td> <td>- Temporary form data during multi-page navigation.<br>- Single-tab state (e.g., wizard steps).</td></tr></tbody></table> <hr> <h3 id="summary-table"><a href="#summary-table" class="header-anchor">#</a> <strong>Summary Table</strong></h3> <table><thead><tr><th>Feature</th> <th>Cookies</th> <th>localStorage</th> <th>sessionStorage</th></tr></thead> <tbody><tr><td><strong>Capacity</strong></td> <td>~4 KB</td> <td>~5-10 MB</td> <td>~5-10 MB</td></tr> <tr><td><strong>Lifespan</strong></td> <td>Configurable expiration</td> <td>Until manually deleted</td> <td>Tab/window closed</td></tr> <tr><td><strong>Scope</strong></td> <td>Domain/path-specific</td> <td>Origin-wide</td> <td>Tab-specific</td></tr> <tr><td><strong>Sent to Server</strong></td> <td>Yes</td> <td>No</td> <td>No</td></tr> <tr><td><strong>XSS Risk</strong></td> <td>Lower (with <code>HttpOnly</code>)</td> <td>High</td> <td>High</td></tr></tbody></table> <p>By understanding these distinctions, you can choose the right storage mechanism for your application’s needs.</p> <h2 id="_5-describe-the-difference-between-script-script-async-and-script-defer"><a href="#_5-describe-the-difference-between-script-script-async-and-script-defer" class="header-anchor">#</a> 5. Describe the difference between <code>&lt;script&gt;</code>, <code>&lt;script async&gt;</code> and <code>&lt;script defer&gt;</code></h2> <p>The <code>&lt;script&gt;</code>, <code>&lt;script async&gt;</code>, and <code>&lt;script defer&gt;</code> attributes control how JavaScript files are loaded and executed in an HTML document, impacting page rendering and script execution order. Here’s a breakdown:</p> <hr> <h3 id="_1-script-standard-behavior"><a href="#_1-script-standard-behavior" class="header-anchor">#</a> <strong>1. <code>&lt;script&gt;</code> (Standard Behavior)</strong></h3> <ul><li><p><strong>Download</strong>: Blocks HTML parsing until the script is fully downloaded.</p></li> <li><p><strong>Execution</strong>: Executes immediately after download, halting parsing.</p></li> <li><p><strong>Order</strong>: Scripts run in the order they appear in the document.</p></li> <li><p><strong>Use Case</strong>: Critical scripts that must run first (e.g., scripts that modify the DOM needed for initial rendering).</p></li> <li><p><strong>Example</strong>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>critical.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="_2-script-async-asynchronous"><a href="#_2-script-async-asynchronous" class="header-anchor">#</a> <strong>2. <code>&lt;script async&gt;</code> (Asynchronous)</strong></h3> <ul><li><p><strong>Download</strong>: Fetches the script <strong>asynchronously</strong> (in parallel with HTML parsing).</p></li> <li><p><strong>Execution</strong>: Executes <strong>as soon as it’s downloaded</strong>, pausing HTML parsing.</p></li> <li><p><strong>Order</strong>: <strong>No guaranteed execution order</strong> (scripts run as they finish downloading).</p></li> <li><p><strong>Use Case</strong>: Independent scripts where timing doesn’t matter (e.g., analytics, ads).</p></li> <li><p><strong>Example</strong>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>analytics.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="_3-script-defer-deferred"><a href="#_3-script-defer-deferred" class="header-anchor">#</a> <strong>3. <code>&lt;script defer&gt;</code> (Deferred)</strong></h3> <ul><li><p><strong>Download</strong>: Fetches the script <strong>asynchronously</strong> without blocking parsing.</p></li> <li><p><strong>Execution</strong>: Waits to run until <strong>after HTML parsing is complete</strong> (before <code>DOMContentLoaded</code>).</p></li> <li><p><strong>Order</strong>: Executes scripts <strong>in document order</strong>, even if downloaded out of sequence.</p></li> <li><p><strong>Use Case</strong>: Scripts that depend on the full DOM or other scripts (e.g., libraries, main app logic).</p></li> <li><p><strong>Example</strong>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>library.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- Runs after library.js --&gt;</span>
</code></pre></div></li></ul> <hr> <h3 id="comparison-table"><a href="#comparison-table" class="header-anchor">#</a> <strong>Comparison Table</strong></h3> <table><thead><tr><th>Attribute</th> <th>Download Behavior</th> <th>Execution Timing</th> <th>Order Guarantee</th> <th>Ideal Use Case</th></tr></thead> <tbody><tr><td><code>&lt;script&gt;</code></td> <td>Blocks parsing</td> <td>Immediate</td> <td>Yes</td> <td>Critical, render-blocking code</td></tr> <tr><td><code>async</code></td> <td>Parallel (non-blocking)</td> <td>Immediate after download</td> <td>No</td> <td>Independent scripts</td></tr> <tr><td><code>defer</code></td> <td>Parallel (non-blocking)</td> <td>After HTML parsing</td> <td>Yes</td> <td>DOM-dependent or ordered code</td></tr></tbody></table> <hr> <h3 id="key-notes"><a href="#key-notes" class="header-anchor">#</a> <strong>Key Notes</strong></h3> <ul><li><strong>Inline Scripts</strong>: <code>async</code>/<code>defer</code> <strong>do nothing</strong> for scripts without <code>src</code>.</li> <li><strong>DOMContentLoaded</strong>: <code>defer</code> scripts run before this event; <code>async</code> may run before or after.</li> <li><strong>Legacy Browsers</strong>: Some older browsers ignore <code>async</code>/<code>defer</code> and treat them as standard <code>&lt;script&gt;</code>.</li> <li><strong>Dynamic Scripts</strong>: Scripts added via JavaScript (e.g., <code>document.createElement('script')</code>) default to <code>async</code> unless <code>async=false</code> is set.</li></ul> <hr> <h3 id="best-practices"><a href="#best-practices" class="header-anchor">#</a> <strong>Best Practices</strong></h3> <ul><li>Place non-critical scripts at the <strong>end of <code>&lt;body&gt;</code></strong> if not using <code>async</code>/<code>defer</code>.</li> <li>Use <code>defer</code> for scripts that rely on the full DOM or need execution order preserved.</li> <li>Use <code>async</code> for scripts that don’t depend on anything else (e.g., third-party widgets).</li></ul> <p>By choosing the right loading strategy, you optimize page speed and ensure scripts behave as expected.</p> <h2 id="_6-why-is-it-generally-a-good-idea-to-position-css-link-s-between-head-head-and-js-script-s-just-before-body-do-you-know-any-exceptions"><a href="#_6-why-is-it-generally-a-good-idea-to-position-css-link-s-between-head-head-and-js-script-s-just-before-body-do-you-know-any-exceptions" class="header-anchor">#</a> 6. Why is it generally a good idea to position CSS <code>&lt;link&gt;</code>s between <code>&lt;head&gt;&lt;/head&gt;</code> and JS <code>&lt;script&gt;</code>s just before <code>&lt;/body&gt;</code>? Do you know any exceptions?</h2> <p>将 CSS <code>&lt;link&gt;</code> 放在 <code>&lt;head&gt;</code> 中，而将 JS <code>&lt;script&gt;</code> 放在 <code>&lt;/body&gt;</code> 之前，主要是为了优化<strong>页面渲染性能</strong>和<strong>用户体验</strong>。以下是详细解释及例外情况：</p> <hr> <h3 id="一、为什么这样做"><a href="#一、为什么这样做" class="header-anchor">#</a> <strong>一、为什么这样做？</strong></h3> <h4 id="_1-css-link-放在-head-中"><a href="#_1-css-link-放在-head-中" class="header-anchor">#</a> <strong>1. CSS <code>&lt;link&gt;</code> 放在 <code>&lt;head&gt;</code> 中</strong></h4> <ul><li><strong>避免 FOUC（无样式内容闪烁）</strong>：<br>
浏览器需先加载 CSS 再渲染页面。若 CSS 在底部，用户可能先看到未样式化的 HTML，随后突然应用样式，导致视觉闪烁。</li> <li><strong>并行加载</strong>：<br>
CSS 不会阻塞 HTML 解析，但会阻塞渲染（直到 CSSOM 构建完成）。将 CSS 放在 <code>&lt;head&gt;</code> 中可尽早启动下载，减少渲染阻塞时间。</li></ul> <h4 id="_2-js-script-放在-body-前"><a href="#_2-js-script-放在-body-前" class="header-anchor">#</a> <strong>2. JS <code>&lt;script&gt;</code> 放在 <code>&lt;/body&gt;</code> 前</strong></h4> <ul><li><strong>防止阻塞 HTML 解析</strong>：<br>
浏览器遇到 <code>&lt;script&gt;</code>（无 <code>async/defer</code>）会暂停解析 HTML，直到脚本下载并执行完毕。放在末尾可确保页面内容优先渲染。</li> <li><strong>DOM 访问安全</strong>：<br>
脚本执行时，DOM 已完全解析，避免因元素未加载而报错（如 <code>document.getElementById</code> 找不到元素）。</li></ul> <hr> <h3 id="二、例外情况"><a href="#二、例外情况" class="header-anchor">#</a> <strong>二、例外情况</strong></h3> <h4 id="_1-需要提前加载的-js"><a href="#_1-需要提前加载的-js" class="header-anchor">#</a> <strong>1. 需要提前加载的 JS</strong></h4> <ul><li><p><strong>关键功能依赖</strong>：<br>
若脚本需在页面渲染前执行（如性能监控、A/B 测试），可使用 <code>async</code> 或 <code>defer</code> 异步加载：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>analytics.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 异步加载，不阻塞 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>framework.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 延迟到 HTML 解析后执行 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>动态注入内容</strong>：<br>
如使用 <code>document.write</code>（已不推荐）或服务端渲染（SSR）时，需提前加载脚本。</p></li></ul> <h4 id="_2-非关键-css"><a href="#_2-非关键-css" class="header-anchor">#</a> <strong>2. 非关键 CSS</strong></h4> <ul><li><p><strong>非首屏样式</strong>：<br>
对非关键 CSS（如弹窗、懒加载内容）使用媒体查询或异步加载：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 仅在打印时加载 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 异步加载非关键 CSS --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>non-critical.css<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span>
  <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>rel<span class="token operator">=</span><span class="token string">'stylesheet'</span></span><span class="token punctuation">&quot;</span></span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>non-critical.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h4 id="_3-性能优化策略"><a href="#_3-性能优化策略" class="header-anchor">#</a> <strong>3. 性能优化策略</strong></h4> <ul><li><p><strong>关键 CSS 内联</strong>：<br>
将首屏关键 CSS 内联到 <code>&lt;head&gt;</code> 中，减少 HTTP 请求：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* 内联关键样式 */</span>
  <span class="token selector">.header</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>预加载关键资源</strong>：<br>
使用 <code>&lt;link rel=&quot;preload&quot;&gt;</code> 提前加载关键 JS/CSS：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>styles.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="三、现代最佳实践"><a href="#三、现代最佳实践" class="header-anchor">#</a> <strong>三、现代最佳实践</strong></h3> <ol><li><p><strong>优先使用 <code>async/defer</code></strong>：</p> <ul><li><code>async</code>：脚本下载完成后立即执行（不保证顺序）。</li> <li><code>defer</code>：脚本在 HTML 解析完成后按顺序执行。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ads.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 独立脚本（如广告） --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 依赖 DOM 的脚本 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>HTTP/2 服务器推送</strong>：<br>
对于关键资源（如 CSS/JS），服务器可主动推送，减少延迟。</p></li> <li><p><strong>代码分割（Code Splitting）</strong>：<br>
使用 Webpack 等工具拆分代码，按需加载非关键 JS。</p></li></ol> <hr> <h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>默认规则</strong>：CSS 置顶，JS 置底——确保快速渲染和交互。</li> <li><strong>例外场景</strong>：异步加载、关键资源优化、性能调优。</li> <li><strong>现代优化</strong>：利用 <code>async/defer</code>、预加载、代码分割提升性能。</li></ul> <p>遵循这些原则，能在绝大多数场景下优化加载性能，同时灵活应对特殊需求。</p> <h2 id="_7-what-is-progressive-rendering-什么是渐进式渲染"><a href="#_7-what-is-progressive-rendering-什么是渐进式渲染" class="header-anchor">#</a> 7. What is progressive rendering? 什么是渐进式渲染？</h2> <p>渐进式渲染（Progressive Rendering）是一种优化网页加载性能的策略，其核心思想是<strong>优先展示用户可见的关键内容</strong>，随后逐步加载和渲染非关键资源，以提升用户感知速度和交互体验。以下是其核心原理、技术实现与典型应用场景：</p> <hr> <h3 id="一、核心原理"><a href="#一、核心原理" class="header-anchor">#</a> <strong>一、核心原理</strong></h3> <ul><li><strong>关键渲染路径优先</strong>：优先加载并渲染首屏内容（Above the Fold），减少用户等待时间。</li> <li><strong>分阶段加载</strong>：将页面拆分为多个区块，按优先级分批加载，避免一次性加载所有资源。</li> <li><strong>流式传输</strong>：服务器分块（Chunked）传输 HTML/CSS，浏览器逐步解析渲染。</li></ul> <hr> <h3 id="二、技术实现"><a href="#二、技术实现" class="header-anchor">#</a> <strong>二、技术实现</strong></h3> <h4 id="_1-服务端策略"><a href="#_1-服务端策略" class="header-anchor">#</a> <strong>1. 服务端策略</strong></h4> <ul><li><p><strong>分块输出（Chunked Transfer Encoding）</strong>：<br>
服务器将 HTML 拆分为多个片段（如头部、主体、尾部），逐步发送到浏览器。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 首屏内容 --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 后续内容由服务器流式推送 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>服务端渲染（SSR）优先关键内容</strong>：<br>
动态生成首屏 HTML，异步加载剩余数据（如评论、推荐列表）。</p></li></ul> <h4 id="_2-前端优化"><a href="#_2-前端优化" class="header-anchor">#</a> <strong>2. 前端优化</strong></h4> <ul><li><p><strong>懒加载（Lazy Loading）</strong>：<br>
延迟加载图片、视频、非关键脚本：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>placeholder.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>real-image.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Intersection Observer API 实现</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> img <span class="token operator">=</span> entry<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
      observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>占位符（Skeleton Screens）</strong>：<br>
用 CSS 或 SVG 绘制加载骨架，缓解内容加载前的空白。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>skeleton<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><strong>代码分割（Code Splitting）</strong>：<br>
使用 Webpack 等工具拆分 JavaScript，按需加载路由或组件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// React 动态导入</span>
<span class="token keyword">const</span> Comments <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./Comments&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_3-资源优先级控制"><a href="#_3-资源优先级控制" class="header-anchor">#</a> <strong>3. 资源优先级控制</strong></h4> <ul><li><p><strong>预加载关键资源</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>critical.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p><strong>异步非关键脚本</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>analytics.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <hr> <h3 id="三、应用场景"><a href="#三、应用场景" class="header-anchor">#</a> <strong>三、应用场景</strong></h3> <ol><li><p><strong>长列表/瀑布流</strong>（如社交媒体动态）：<br>
优先渲染前 10 条内容，滚动时加载后续条目。</p></li> <li><p><strong>电商产品页</strong>：<br>
优先展示图片、价格、购买按钮，延迟加载用户评论、推荐商品。</p></li> <li><p><strong>新闻网站</strong>：<br>
首屏输出文章主体，异步加载广告、相关新闻。</p></li></ol> <hr> <h3 id="四、优势与挑战"><a href="#四、优势与挑战" class="header-anchor">#</a> <strong>四、优势与挑战</strong></h3> <h4 id="优势"><a href="#优势" class="header-anchor">#</a> <strong>优势</strong></h4> <ul><li><strong>更快的首屏时间（FCP）</strong>：用户更快看到可交互内容。</li> <li><strong>降低跳出率</strong>：减少用户因等待而离开的概率。</li> <li><strong>节省带宽</strong>：减少非必要资源的传输。</li></ul> <h4 id="挑战"><a href="#挑战" class="header-anchor">#</a> <strong>挑战</strong></h4> <ul><li><strong>SEO 风险</strong>：异步加载内容可能不被搜索引擎抓取（需结合 SSR 或预渲染）。</li> <li><strong>布局偏移（CLS）</strong>：动态加载内容可能导致页面抖动（需预留占位空间）。</li> <li><strong>状态管理复杂性</strong>：异步加载可能破坏数据依赖顺序。</li></ul> <hr> <h3 id="五、工具与最佳实践"><a href="#五、工具与最佳实践" class="header-anchor">#</a> <strong>五、工具与最佳实践</strong></h3> <ul><li><strong>性能监控</strong>：使用 Lighthouse、WebPageTest 评估优化效果。</li> <li><strong>框架支持</strong>：
<ul><li><strong>Next.js</strong>：自动代码分割 + 流式渲染。</li> <li><strong>Vue/Nuxt.js</strong>：<code>&lt;client-only&gt;</code> 组件延迟加载非关键模块。</li></ul></li> <li><strong>CDN 边缘计算</strong>：通过边缘节点动态优化内容分发。</li></ul> <hr> <h3 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> <strong>总结</strong></h3> <p>渐进式渲染通过<strong>分阶段加载、流式传输和资源优先级控制</strong>，在资源有限的环境下最大化用户体验。它尤其适合内容密集型网站（如媒体、电商），但需结合具体场景平衡性能与功能完整性。</p> <h2 id="_8-canvas与svg的区别"><a href="#_8-canvas与svg的区别" class="header-anchor">#</a> 8. <code>canvas</code>与<code>svg</code>的区别</h2> <p>Canvas 和 SVG 是两种在网页上绘制图形的技术，但它们在实现方式、适用场景及特性上有显著区别。以下是详细的对比：</p> <hr> <h3 id="_1-核心原理"><a href="#_1-核心原理" class="header-anchor">#</a> <strong>1. 核心原理</strong></h3> <table><thead><tr><th><strong>特性</strong></th> <th><strong>Canvas</strong></th> <th><strong>SVG</strong></th></tr></thead> <tbody><tr><td><strong>类型</strong></td> <td><strong>位图（栅格图形）</strong>：基于像素绘制，放大后会失真。</td> <td><strong>矢量图形</strong>：基于数学公式描述形状，无限缩放不失真。</td></tr> <tr><td><strong>渲染方式</strong></td> <td>通过 JavaScript 动态生成像素，需要逐帧绘制。</td> <td>通过 XML 标签定义图形，浏览器解析后渲染。</td></tr> <tr><td><strong>DOM 结构</strong></td> <td>单元素：整个 Canvas 是 <code>&lt;canvas&gt;</code> 一个节点，内部图形无独立 DOM 元素。</td> <td>多元素：每个图形（如 <code>&lt;rect&gt;</code>、<code>&lt;circle&gt;</code>）都是独立的 DOM 节点。</td></tr></tbody></table> <hr> <h3 id="_2-性能与适用场景"><a href="#_2-性能与适用场景" class="header-anchor">#</a> <strong>2. 性能与适用场景</strong></h3> <table><thead><tr><th><strong>场景</strong></th> <th><strong>Canvas</strong></th> <th><strong>SVG</strong></th></tr></thead> <tbody><tr><td><strong>动态内容</strong></td> <td>高性能：适合频繁更新的动态图形（如游戏、实时数据可视化、动画）。</td> <td>性能较低：DOM 操作开销大，不适合大量动态元素。</td></tr> <tr><td><strong>复杂度</strong></td> <td>处理大量元素更高效（如粒子效果、图像滤镜）。</td> <td>元素过多时性能下降（如超过 1000 个独立形状）。</td></tr> <tr><td><strong>交互性</strong></td> <td>需手动实现交互（如点击检测），适合简单交互或全屏操作。</td> <td>原生支持事件绑定（如点击、悬停），适合复杂交互（如图表工具提示）。</td></tr></tbody></table> <hr> <h3 id="_3-开发与维护"><a href="#_3-开发与维护" class="header-anchor">#</a> <strong>3. 开发与维护</strong></h3> <table><thead><tr><th><strong>特性</strong></th> <th><strong>Canvas</strong></th> <th><strong>SVG</strong></th></tr></thead> <tbody><tr><td><strong>开发方式</strong></td> <td>代码驱动：需编写 JavaScript 控制绘制逻辑。</td> <td>声明式：通过 XML/CSS 定义图形，直观易调试。</td></tr> <tr><td><strong>可访问性</strong></td> <td>默认不可访问：需额外 ARIA 标签辅助屏幕阅读器。</td> <td>原生可访问：文本和图形可直接被搜索引擎和辅助工具解析。</td></tr> <tr><td><strong>SEO 友好性</strong></td> <td>不支持：绘制内容无法被搜索引擎抓取。</td> <td>支持：文本和结构可被索引，适合需要 SEO 的图形（如信息图表）。</td></tr></tbody></table> <hr> <h3 id="_4-代码示例"><a href="#_4-代码示例" class="header-anchor">#</a> <strong>4. 代码示例</strong></h3> <h4 id="canvas-绘制蓝色矩形"><a href="#canvas-绘制蓝色矩形" class="header-anchor">#</a> <strong>Canvas（绘制蓝色矩形）</strong></h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myCanvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myCanvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 坐标 (10,10) 处绘制 100x100 矩形</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="svg-绘制蓝色矩形"><a href="#svg-绘制蓝色矩形" class="header-anchor">#</a> <strong>SVG（绘制蓝色矩形）</strong></h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <h3 id="_5-如何选择"><a href="#_5-如何选择" class="header-anchor">#</a> <strong>5. 如何选择？</strong></h3> <ul><li><p><strong>选 Canvas</strong>：</p> <ul><li>需要高性能渲染（如游戏、数据可视化仪表盘）。</li> <li>处理像素级操作（如图像编辑器、滤镜效果）。</li> <li>不需要复杂交互或 SEO 优化。</li></ul></li> <li><p><strong>选 SVG</strong>：</p> <ul><li>需要可缩放图形（如 Logo、图标、地图）。</li> <li>需要复杂交互或无障碍访问（如可点击的图表）。</li> <li>图形结构简单且需 SEO 友好。</li></ul></li></ul> <hr> <h3 id="总结-4"><a href="#总结-4" class="header-anchor">#</a> <strong>总结</strong></h3> <ul><li><strong>Canvas</strong> 是“画布”，适合动态、高性能的像素操作。</li> <li><strong>SVG</strong> 是“矢量图形”，适合静态、可交互、可缩放的界面元素。</li> <li><strong>混合使用</strong>：复杂项目可结合两者（如用 SVG 做 UI，Canvas 做背景动画）。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge/system-design/news-feed.html" class="prev">
        news feed
      </a></span> <span class="next"><a href="/knowledge/interview/JavaScript.html">
        JavaScript
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge/assets/js/app.d13ce116.js" defer></script><script src="/knowledge/assets/js/2.bc15d414.js" defer></script><script src="/knowledge/assets/js/1.6c0ff8f4.js" defer></script><script src="/knowledge/assets/js/67.19eee347.js" defer></script>
  </body>
</html>
