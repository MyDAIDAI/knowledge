<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>throttle | 邓攀的技术博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.ef1330c5.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.d13ce116.js" as="script"><link rel="preload" href="/knowledge/assets/js/2.bc15d414.js" as="script"><link rel="preload" href="/knowledge/assets/js/1.6c0ff8f4.js" as="script"><link rel="preload" href="/knowledge/assets/js/47.ba0b752b.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.e193d6c0.js"><link rel="prefetch" href="/knowledge/assets/js/11.8e802c1e.js"><link rel="prefetch" href="/knowledge/assets/js/12.65553447.js"><link rel="prefetch" href="/knowledge/assets/js/13.2be48d38.js"><link rel="prefetch" href="/knowledge/assets/js/14.fbcaafc6.js"><link rel="prefetch" href="/knowledge/assets/js/15.e40ead57.js"><link rel="prefetch" href="/knowledge/assets/js/16.49184ae1.js"><link rel="prefetch" href="/knowledge/assets/js/17.dc3323dd.js"><link rel="prefetch" href="/knowledge/assets/js/18.648b10c4.js"><link rel="prefetch" href="/knowledge/assets/js/19.2a696a53.js"><link rel="prefetch" href="/knowledge/assets/js/20.89f58454.js"><link rel="prefetch" href="/knowledge/assets/js/21.0e698439.js"><link rel="prefetch" href="/knowledge/assets/js/22.2951858e.js"><link rel="prefetch" href="/knowledge/assets/js/23.fad55543.js"><link rel="prefetch" href="/knowledge/assets/js/24.1811a1e3.js"><link rel="prefetch" href="/knowledge/assets/js/25.7d611585.js"><link rel="prefetch" href="/knowledge/assets/js/26.2706e843.js"><link rel="prefetch" href="/knowledge/assets/js/27.2ffa03e5.js"><link rel="prefetch" href="/knowledge/assets/js/28.2e367c11.js"><link rel="prefetch" href="/knowledge/assets/js/29.cb85613d.js"><link rel="prefetch" href="/knowledge/assets/js/3.f74b7660.js"><link rel="prefetch" href="/knowledge/assets/js/30.652b9bc5.js"><link rel="prefetch" href="/knowledge/assets/js/31.e2d5d8ed.js"><link rel="prefetch" href="/knowledge/assets/js/32.2097c650.js"><link rel="prefetch" href="/knowledge/assets/js/33.c3b9402b.js"><link rel="prefetch" href="/knowledge/assets/js/34.9690a5a6.js"><link rel="prefetch" href="/knowledge/assets/js/35.a3e2d1a4.js"><link rel="prefetch" href="/knowledge/assets/js/36.40ee0a89.js"><link rel="prefetch" href="/knowledge/assets/js/37.e5c4e5c6.js"><link rel="prefetch" href="/knowledge/assets/js/38.3da1edcd.js"><link rel="prefetch" href="/knowledge/assets/js/39.dde21d94.js"><link rel="prefetch" href="/knowledge/assets/js/4.d0407187.js"><link rel="prefetch" href="/knowledge/assets/js/40.183865a3.js"><link rel="prefetch" href="/knowledge/assets/js/41.fbed79bd.js"><link rel="prefetch" href="/knowledge/assets/js/42.ddb9e519.js"><link rel="prefetch" href="/knowledge/assets/js/43.d8c6b670.js"><link rel="prefetch" href="/knowledge/assets/js/44.b8600c23.js"><link rel="prefetch" href="/knowledge/assets/js/45.8fdbb89e.js"><link rel="prefetch" href="/knowledge/assets/js/46.2c0b6696.js"><link rel="prefetch" href="/knowledge/assets/js/48.77af7173.js"><link rel="prefetch" href="/knowledge/assets/js/49.4165aa91.js"><link rel="prefetch" href="/knowledge/assets/js/5.6b5b30dd.js"><link rel="prefetch" href="/knowledge/assets/js/50.02a683f2.js"><link rel="prefetch" href="/knowledge/assets/js/51.377c538d.js"><link rel="prefetch" href="/knowledge/assets/js/52.2b8cd451.js"><link rel="prefetch" href="/knowledge/assets/js/53.b6fbea0a.js"><link rel="prefetch" href="/knowledge/assets/js/54.465ac807.js"><link rel="prefetch" href="/knowledge/assets/js/55.0dbe2c3d.js"><link rel="prefetch" href="/knowledge/assets/js/56.58d40823.js"><link rel="prefetch" href="/knowledge/assets/js/57.cd68dd2d.js"><link rel="prefetch" href="/knowledge/assets/js/58.ab749b89.js"><link rel="prefetch" href="/knowledge/assets/js/59.d290e425.js"><link rel="prefetch" href="/knowledge/assets/js/6.ded172f2.js"><link rel="prefetch" href="/knowledge/assets/js/60.3c53fd43.js"><link rel="prefetch" href="/knowledge/assets/js/61.5f83939f.js"><link rel="prefetch" href="/knowledge/assets/js/62.73a942e4.js"><link rel="prefetch" href="/knowledge/assets/js/63.0838cf95.js"><link rel="prefetch" href="/knowledge/assets/js/64.d3240197.js"><link rel="prefetch" href="/knowledge/assets/js/65.80115882.js"><link rel="prefetch" href="/knowledge/assets/js/66.b3f1a356.js"><link rel="prefetch" href="/knowledge/assets/js/67.19eee347.js"><link rel="prefetch" href="/knowledge/assets/js/68.8be7df47.js"><link rel="prefetch" href="/knowledge/assets/js/69.20fbf51a.js"><link rel="prefetch" href="/knowledge/assets/js/7.48ee682d.js"><link rel="prefetch" href="/knowledge/assets/js/70.be66b6a3.js"><link rel="prefetch" href="/knowledge/assets/js/71.1cb926bc.js"><link rel="prefetch" href="/knowledge/assets/js/72.a00945dc.js"><link rel="prefetch" href="/knowledge/assets/js/73.a2552003.js"><link rel="prefetch" href="/knowledge/assets/js/74.cbe8f2ff.js"><link rel="prefetch" href="/knowledge/assets/js/75.0d9796c1.js"><link rel="prefetch" href="/knowledge/assets/js/76.81666afa.js"><link rel="prefetch" href="/knowledge/assets/js/77.c982ce9e.js"><link rel="prefetch" href="/knowledge/assets/js/78.cdad9a20.js"><link rel="prefetch" href="/knowledge/assets/js/79.f5c2f5e9.js"><link rel="prefetch" href="/knowledge/assets/js/80.f34dff30.js"><link rel="prefetch" href="/knowledge/assets/js/81.a63fca8d.js"><link rel="prefetch" href="/knowledge/assets/js/vendors~docsearch.94b65286.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.ef1330c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">邓攀的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/MyDAIDAI" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge/" aria-current="page" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><a href="/knowledge/vue" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/vue/响应式.html" class="sidebar-link">响应式</a></li><li><a href="/knowledge/vue/编译.html" class="sidebar-link">编译</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/react" class="sidebar-heading clickable"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/react/JSX.html" class="sidebar-link">JSX</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/typescript" class="sidebar-heading clickable"><span>TypeScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/typescript/type-challenges.html" class="sidebar-link">类型体操</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/nextjs" class="sidebar-heading clickable"><span>nextjs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/nextjs/docs.html" class="sidebar-link">文档</a></li><li><a href="/knowledge/nextjs/use.html" class="sidebar-link">使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/algorithm" class="sidebar-heading clickable"><span>算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/algorithm/二分查找.html" class="sidebar-link">二分查找</a></li><li><a href="/knowledge/algorithm/大数相加.html" class="sidebar-link">大数相加</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/system-design" class="sidebar-heading clickable"><span>系统设计</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/system-design/news-feed.html" class="sidebar-link">news feed</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/interview" class="sidebar-heading clickable"><span>面试相关</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/interview/html.html" class="sidebar-link">HTML</a></li><li><a href="/knowledge/interview/JavaScript.html" class="sidebar-link">JavaScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/GFE" class="sidebar-heading clickable router-link-active open"><span>GFE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/GFE/01.debounce/" class="sidebar-link">Debounce</a></li><li><a href="/knowledge/GFE/02.myReduce/" class="sidebar-link">MyReduce</a></li><li><a href="/knowledge/GFE/03.classnames/" class="sidebar-link">ClassNames</a></li><li><a href="/knowledge/GFE/04.flatten/" class="sidebar-link">Flatten</a></li><li><a href="/knowledge/GFE/05.throttle/" aria-current="page" class="active sidebar-link">Throttle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/GFE/05.throttle/#examples" class="sidebar-link">Examples</a></li><li class="sidebar-sub-header"><a href="/knowledge/GFE/05.throttle/#solution" class="sidebar-link">Solution</a></li><li class="sidebar-sub-header"><a href="/knowledge/GFE/05.throttle/#apply" class="sidebar-link">Apply</a></li><li class="sidebar-sub-header"><a href="/knowledge/GFE/05.throttle/#more" class="sidebar-link">More</a></li></ul></li><li><a href="/knowledge/GFE/06.Type%20Utilities/" class="sidebar-link">Type Utilities</a></li><li><a href="/knowledge/GFE/07.Type%20Utilities%20II/" class="sidebar-link">Type Utilities II</a></li><li><a href="/knowledge/GFE/08.Promise.all/" class="sidebar-link">Promise.all</a></li><li><a href="/knowledge/GFE/09.Data%20Merging/" class="sidebar-link">Data Merging</a></li><li><a href="/knowledge/GFE/10.Deep%20Clone/" class="sidebar-link">Deep Clone</a></li><li><a href="/knowledge/GFE/11.Event%20Emitter/" class="sidebar-link">Event Emitter</a></li><li><a href="/knowledge/GFE/12.getElementsByStyle/" class="sidebar-link">getElementsByStyle</a></li><li><a href="/knowledge/GFE/13.Function.prototype.call/" class="sidebar-link">Function.prototype.call</a></li><li><a href="/knowledge/GFE/14.List%20Format/" class="sidebar-link">List Format</a></li><li><a href="/knowledge/GFE/15.Map%20Async%20Limit/" class="sidebar-link">Map Async Limit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/Blind" class="sidebar-heading clickable"><span>Blind</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/Blind/01.Balanced%20Brackets/" class="sidebar-link">Balanced Brackets</a></li><li><a href="/knowledge/Blind/02.Find%20Duplicates%20in%20Array/" class="sidebar-link">Find Duplicates in Array</a></li><li><a href="/knowledge/Blind/03.Find%20Missing%20Number%20in%20Sequence/" class="sidebar-link">Find Missing Number in Sequence</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/knowledge/git" class="sidebar-heading clickable"><span>Git</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/git/commit.html" class="sidebar-link">commit</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="throttle"><a href="#throttle" class="header-anchor">#</a> throttle</h1> <p>实现一个节流函数，<code>throttle</code>是一个技术，来控制一段时间内函数的执行次数。当一个<code>JavaScript</code>函数被传入一个节流函数中，它在一段时间内只会被执行一次。</p> <p>这个函数会被立刻调用，然后在剩余时间内不会再被调用</p> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> throttledIncrement <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>increment<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// t = 0时: 调用throttledIncrement函数，第一次进入执行，i 为 1</span>
<span class="token function">throttledIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i = 1</span>

<span class="token comment">// t = 50: 调用throttledIncrement函数，没有到setTimeout执行时间，i 仍为 1</span>
<span class="token function">throttledIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i = 1</span>

<span class="token comment">// t = 350: 超过wait时间，会被调用一次，i++，i 为 2</span>
<span class="token function">throttledIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i = 2</span>
</code></pre></div><h2 id="solution"><a href="#solution" class="header-anchor">#</a> Solution</h2> <p>可以看出<code>throttle</code>有两个状态：</p> <ul><li>空闲<code>idle</code>状态：当超过<code>wait</code>时间，或者第一次进入时，为该状态</li> <li>激活<code>active</code>状态：当执行过该函数，并且还在<code>wait</code>时间内的状态</li></ul> <p>使用<code>setTimeout</code>来开始进行计时，到时间，则将其状态置为<code>idle</code>，每次调用时，判断当前状态，只有在<code>idle</code>状态时，才能执行函数以及开启定时器，在这里，使用<code>timerID</code>来表示</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ThrottleFunction<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">TimeIDType</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> setTimeout<span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">throttle</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>func<span class="token operator">:</span> ThrottleFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> wait<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> ThrottleFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timerId<span class="token operator">:</span> TimeIDType <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerId <span class="token keyword">as</span> TimeIDType<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timerId <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="typescript类型解析"><a href="#typescript类型解析" class="header-anchor">#</a> <code>TypeScript</code>类型解析</h3> <ol><li>泛型类型参数</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li>T 是泛型类型参数，约束为任意类型的数组 any[]</li> <li>用于捕获被节流函数的参数类型（元组类型）</li></ul> <ol start="2"><li>类型别名</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ThrottleFunction<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">TimeIDType</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> setTimeout<span class="token operator">&gt;</span>
</code></pre></div><ul><li>使用剩余参数语法<code>...args: T</code>表示参数类型为元组<code>T</code></li> <li>返回类型为<code>any</code></li></ul> <ol start="3"><li>泛型函数</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">throttle</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">:</span> ThrottleFunction<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li>泛型函数声明，<code>T</code>自动被推断为节流函数的参数类型</li> <li>返回函数类型<code>ThrottleFunction&lt;T&gt;</code>保持参数一致</li></ul> <ol start="4"><li><code>ReturnType</code>工具类型</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> timerID<span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> setTimeout<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>ReturnType&lt;typeof setTimeout&gt;</code>获取<code>setTimeout</code>的返回值类型</li> <li>兼容不同环境（浏览器返回<code>number</code>，<code>Node.js</code>返回<code>NodeJS.Timeout</code>）</li></ul> <h2 id="apply"><a href="#apply" class="header-anchor">#</a> Apply</h2> <p>滚动事件，窗口缩放等高频触发场景的性能优化</p> <h2 id="more"><a href="#more" class="header-anchor">#</a> More</h2> <p>可以添加<code>leading</code>或者<code>trailing</code>参数，详见<a href="https://lodash.com/docs/4.17.15#throttle" target="_blank" rel="noopener noreferrer">Lodash's throttle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge/GFE/04.flatten/" class="prev">
        Flatten
      </a></span> <span class="next"><a href="/knowledge/GFE/06.Type%20Utilities/">
        Type Utilities
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge/assets/js/app.d13ce116.js" defer></script><script src="/knowledge/assets/js/2.bc15d414.js" defer></script><script src="/knowledge/assets/js/1.6c0ff8f4.js" defer></script><script src="/knowledge/assets/js/47.ba0b752b.js" defer></script>
  </body>
</html>
